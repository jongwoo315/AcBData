---
output:
  md_document:
    variant: markdown_github
---


```r
# 산포도
require(lattice)
cars
```

```
##    speed dist
## 1      4    2
## 2      4   10
## 3      7    4
## 4      7   22
## 5      8   16
## 6      9   10
## 7     10   18
## 8     10   26
## 9     10   34
## 10    11   17
## 11    11   28
## 12    12   14
## 13    12   20
## 14    12   24
## 15    12   28
## 16    13   26
## 17    13   34
## 18    13   34
## 19    13   46
## 20    14   26
## 21    14   36
## 22    14   60
## 23    14   80
## 24    15   20
## 25    15   26
## 26    15   54
## 27    16   32
## 28    16   40
## 29    17   32
## 30    17   40
## 31    17   50
## 32    18   42
## 33    18   56
## 34    18   76
## 35    18   84
## 36    19   36
## 37    19   46
## 38    19   68
## 39    20   32
## 40    20   48
## 41    20   52
## 42    20   56
## 43    20   64
## 44    22   66
## 45    23   54
## 46    24   70
## 47    24   92
## 48    24   93
## 49    24  120
## 50    25   85
```

```r
xyplot(dist ~ speed, data = cars)
```

![plot of chunk unnamed-chunk-45](figure/unnamed-chunk-45-1.png)

```r
# ggplot2를 이용하여 분포를 알 수 있도록 다양하게 출력해보세요
library(ggplot2)
ggplot(cars, aes(x = speed, y = dist)) + geom_point()
```

![plot of chunk unnamed-chunk-45](figure/unnamed-chunk-45-2.png)

```r
ggplot(cars, aes(x = speed, y = dist)) + geom_boxplot()
```

```
## Warning: Continuous x aesthetic -- did you forget aes(group=...)?
```

![plot of chunk unnamed-chunk-45](figure/unnamed-chunk-45-3.png)

```r
ggplot(cars, aes(x = speed, fill = dist)) + geom_density()
```

![plot of chunk unnamed-chunk-45](figure/unnamed-chunk-45-4.png)

```r
#ggplot(cars, aes(x = speed, fill = dist)) + geom_bar()

#ggplot(cars, aes(x = speed, fill = dist)) + geom_dotplot()


# loess로 회귀
ggplot(cars, aes(x = speed, y = dist)) + geom_point(position = position_jitter(w = 0.2, h = 0.2)) + geom_smooth() + ylab('dist') + xlab('speed')
```

```
## `geom_smooth()` using method = 'loess'
```

![plot of chunk unnamed-chunk-45](figure/unnamed-chunk-45-5.png)

```r
# 선형회귀 메소드로 회귀
ggplot(cars, aes(x = speed, y = dist)) + geom_point(position = position_jitter(w = 0.2, h = 0.2)) + geom_smooth(method = "lm", se = FALSE) + ylab('dist') + xlab('speed')
```

![plot of chunk unnamed-chunk-45](figure/unnamed-chunk-45-6.png)


```r
# [1]
mean(runif(100))
```

```
## [1] 0.5100437
```

```r
f <- mean
# [2]
f(runif(100))
```

```
## [1] 0.5635069
```

```r
#function(x) sum(x) / length(x)
mymean <- function(x) sum(x) / length(x)
# [3]
mymean(runif(100))
```

```
## [1] 0.5165768
```

```r
# [4]
mymean(runif(100, 1, 2))
```

```
## [1] 1.454896
```

```r
# [5]
(function(x) sum(x) / length(x)) (runif(100))
```

```
## [1] 0.4822389
```

```r
make.power <- function(x, n){
  return (x ^ n)
}
make.power(3, 2)
```

```
## [1] 9
```

```r
make.power1 <- function(n){
  return (function(x) x ^ n)
}

my.square <- make.power1(2)
my.square(3)
```

```
## [1] 9
```

```r
(make.power1(4)) (2) # 2에 4승 = 2^4
```

```
## [1] 16
```

```r
mean.and.var <- function(x){
  m <- mean(x)
  v <- var(x)
  data.frame(mean = m, var = v)
}
```


```r
sapply(1:10, function(n) mean(rnorm(n = 5, mean = 0, sd = 1)))
```

```
##  [1] -0.0665334 -0.4935940 -0.2809899 -0.1062439 -0.4450812 -0.1668857
##  [7]  0.1527264  0.1060198  0.6848838 -0.3480969
```

```r
#sapply(1:10, mean(rnorm(n = 5, mean = 0, sd = 1)))
#sapply(rnorm(n = 5, mean = 0, sd = 1), mean)
```

```r
# dataset name: hflights
# package name: dplyr
# methods: filter, arrange, select, mutate, summarise, sample_n, sample_frac
install.packages(c("dplyr", "hflights"), repos="http://cran.nexr.com/")
```

```
## Error in install.packages : Updating loaded packages
```

```r
vignette("introduction", package = "dplyr")
library(dplyr)
library(hflights)
str(hflights)
```

```
## 'data.frame':	227496 obs. of  21 variables:
##  $ Year             : int  2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 ...
##  $ Month            : int  1 1 1 1 1 1 1 1 1 1 ...
##  $ DayofMonth       : int  1 2 3 4 5 6 7 8 9 10 ...
##  $ DayOfWeek        : int  6 7 1 2 3 4 5 6 7 1 ...
##  $ DepTime          : int  1400 1401 1352 1403 1405 1359 1359 1355 1443 1443 ...
##  $ ArrTime          : int  1500 1501 1502 1513 1507 1503 1509 1454 1554 1553 ...
##  $ UniqueCarrier    : chr  "AA" "AA" "AA" "AA" ...
##  $ FlightNum        : int  428 428 428 428 428 428 428 428 428 428 ...
##  $ TailNum          : chr  "N576AA" "N557AA" "N541AA" "N403AA" ...
##  $ ActualElapsedTime: int  60 60 70 70 62 64 70 59 71 70 ...
##  $ AirTime          : int  40 45 48 39 44 45 43 40 41 45 ...
##  $ ArrDelay         : int  -10 -9 -8 3 -3 -7 -1 -16 44 43 ...
##  $ DepDelay         : int  0 1 -8 3 5 -1 -1 -5 43 43 ...
##  $ Origin           : chr  "IAH" "IAH" "IAH" "IAH" ...
##  $ Dest             : chr  "DFW" "DFW" "DFW" "DFW" ...
##  $ Distance         : int  224 224 224 224 224 224 224 224 224 224 ...
##  $ TaxiIn           : int  7 6 5 9 9 6 12 7 8 6 ...
##  $ TaxiOut          : int  13 9 17 22 9 13 15 12 22 19 ...
##  $ Cancelled        : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ CancellationCode : chr  "" "" "" "" ...
##  $ Diverted         : int  0 0 0 0 0 0 0 0 0 0 ...
```

```r
# dplyr way
select(hflights, Year, Month)
```

```
##         Year Month
## 5424    2011     1
## 5425    2011     1
## 5426    2011     1
## 5427    2011     1
## 5428    2011     1
## 5429    2011     1
## 5430    2011     1
## 5431    2011     1
## 5432    2011     1
## 5433    2011     1
## 5434    2011     1
## 5435    2011     1
## 5436    2011     1
## 5437    2011     1
## 5438    2011     1
## 5439    2011     1
## 5440    2011     1
## 5441    2011     1
## 5442    2011     1
## 5443    2011     1
## 5444    2011     1
## 5445    2011     1
## 5446    2011     1
## 5447    2011     1
## 5448    2011     1
## 5449    2011     1
## 5450    2011     1
## 5451    2011     1
## 5452    2011     1
## 5453    2011     1
## 5454    2011     1
## 6343    2011     1
## 6344    2011     1
## 6345    2011     1
## 6346    2011     1
## 6347    2011     1
## 6348    2011     1
## 6349    2011     1
## 6350    2011     1
## 6351    2011     1
## 6352    2011     1
## 6353    2011     1
## 6354    2011     1
## 6355    2011     1
## 6356    2011     1
## 6357    2011     1
## 6358    2011     1
## 6359    2011     1
## 6360    2011     1
## 6361    2011     1
## 6362    2011     1
## 6363    2011     1
## 6364    2011     1
## 6365    2011     1
## 6366    2011     1
## 6367    2011     1
## 6368    2011     1
## 6369    2011     1
## 6370    2011     1
## 6371    2011     1
## 6372    2011     1
## 6373    2011     1
## 8186    2011     1
## 8187    2011     1
## 8188    2011     1
## 8189    2011     1
## 8190    2011     1
## 8191    2011     1
## 8192    2011     1
## 8193    2011     1
## 8194    2011     1
## 8195    2011     1
## 8196    2011     1
## 8197    2011     1
## 8198    2011     1
## 8199    2011     1
## 8200    2011     1
## 8201    2011     1
## 8202    2011     1
## 8203    2011     1
## 8204    2011     1
## 8205    2011     1
## 8206    2011     1
## 8207    2011     1
## 8208    2011     1
## 8209    2011     1
## 8210    2011     1
## 8211    2011     1
## 19266   2011     1
## 19267   2011     1
## 19268   2011     1
## 19269   2011     1
## 19270   2011     1
## 19271   2011     1
## 19272   2011     1
## 19273   2011     1
## 19274   2011     1
## 19275   2011     1
## 19276   2011     1
## 19277   2011     1
## 19278   2011     1
## 19279   2011     1
## 19280   2011     1
## 19281   2011     1
## 19282   2011     1
## 19283   2011     1
## 19284   2011     1
## 19285   2011     1
## 19286   2011     1
## 19287   2011     1
## 19288   2011     1
## 19289   2011     1
## 19290   2011     1
## 19291   2011     1
## 19292   2011     1
## 19293   2011     1
## 19294   2011     1
## 19295   2011     1
## 19296   2011     1
## 23655   2011     1
## 23656   2011     1
## 23657   2011     1
## 23658   2011     1
## 23659   2011     1
## 23660   2011     1
## 23661   2011     1
## 23662   2011     1
## 23663   2011     1
## 23664   2011     1
## 23665   2011     1
## 23666   2011     1
## 23667   2011     1
## 23668   2011     1
## 23669   2011     1
## 23670   2011     1
## 23671   2011     1
## 23672   2011     1
## 23673   2011     1
## 23674   2011     1
## 23675   2011     1
## 23676   2011     1
## 23677   2011     1
## 23678   2011     1
## 23679   2011     1
## 23680   2011     1
## 23681   2011     1
## 23682   2011     1
## 23683   2011     1
## 23684   2011     1
## 23685   2011     1
## 27063   2011     1
## 27064   2011     1
## 27065   2011     1
## 27066   2011     1
## 27067   2011     1
## 27068   2011     1
## 27069   2011     1
## 27070   2011     1
## 27071   2011     1
## 27072   2011     1
## 27073   2011     1
## 27074   2011     1
## 27075   2011     1
## 27076   2011     1
## 27077   2011     1
## 27078   2011     1
## 27079   2011     1
## 27080   2011     1
## 27081   2011     1
## 27082   2011     1
## 27083   2011     1
## 33051   2011     1
## 33052   2011     1
## 33053   2011     1
## 33054   2011     1
## 33055   2011     1
## 33056   2011     1
## 33057   2011     1
## 33058   2011     1
## 33059   2011     1
## 33060   2011     1
## 33061   2011     1
## 33062   2011     1
## 33063   2011     1
## 33064   2011     1
## 33065   2011     1
## 33066   2011     1
## 33067   2011     1
## 33068   2011     1
## 33069   2011     1
## 33070   2011     1
## 33071   2011     1
## 33072   2011     1
## 33073   2011     1
## 33074   2011     1
## 33075   2011     1
## 33076   2011     1
## 33077   2011     1
## 33078   2011     1
## 33079   2011     1
## 33080   2011     1
## 33081   2011     1
## 35256   2011     1
## 35257   2011     1
## 35258   2011     1
## 35259   2011     1
## 35260   2011     1
## 35261   2011     1
## 35262   2011     1
## 35263   2011     1
## 35264   2011     1
## 35265   2011     1
## 35266   2011     1
## 35267   2011     1
## 35268   2011     1
## 35269   2011     1
## 35270   2011     1
## 35271   2011     1
## 35272   2011     1
## 35273   2011     1
## 35274   2011     1
## 35275   2011     1
## 35276   2011     1
## 35277   2011     1
## 35278   2011     1
## 35279   2011     1
## 35280   2011     1
## 35281   2011     1
## 35282   2011     1
## 35283   2011     1
## 35284   2011     1
## 35285   2011     1
## 35286   2011     1
## 35375   2011     1
## 35376   2011     1
## 35377   2011     1
## 35378   2011     1
## 35379   2011     1
## 35380   2011     1
## 35381   2011     1
## 35382   2011     1
## 35383   2011     1
## 39453   2011     1
## 39454   2011     1
## 39455   2011     1
## 39456   2011     1
## 39457   2011     1
## 39458   2011     1
## 39459   2011     1
## 39460   2011     1
## 39461   2011     1
## 39462   2011     1
## 39463   2011     1
## 39464   2011     1
## 39465   2011     1
## 39466   2011     1
## 39467   2011     1
## 39468   2011     1
## 39469   2011     1
## 39470   2011     1
## 39471   2011     1
## 39472   2011     1
## 39473   2011     1
## 39474   2011     1
## 39475   2011     1
## 39476   2011     1
## 39477   2011     1
## 39478   2011     1
## 39479   2011     1
## 39480   2011     1
## 39481   2011     1
## 39482   2011     1
## 39483   2011     1
## 46433   2011     1
## 46788   2011     1
## 47191   2011     1
## 47585   2011     1
## 47933   2011     1
## 48343   2011     1
## 48672   2011     1
## 49014   2011     1
## 49394   2011     1
## 49788   2011     1
## 50174   2011     1
## 50499   2011     1
## 50905   2011     1
## 51270   2011     1
## 51599   2011     1
## 51976   2011     1
## 52351   2011     1
## 52723   2011     1
## 53076   2011     1
## 53497   2011     1
## 53832   2011     1
## 54167   2011     1
## 54534   2011     1
## 54947   2011     1
## 55324   2011     1
## 55688   2011     1
## 56057   2011     1
## 56410   2011     1
## 56750   2011     1
## 57125   2011     1
## 57472   2011     1
## 57719   2011     1
## 57720   2011     1
## 58343   2011     1
## 58344   2011     1
## 58983   2011     1
## 58984   2011     1
## 59614   2011     1
## 59615   2011     1
## 60195   2011     1
## 60196   2011     1
## 60734   2011     1
## 61317   2011     1
## 61318   2011     1
## 61875   2011     1
## 62403   2011     1
## 62404   2011     1
## 62989   2011     1
## 62990   2011     1
## 63545   2011     1
## 63546   2011     1
## 64043   2011     1
## 64557   2011     1
## 65133   2011     1
## 65134   2011     1
## 65685   2011     1
## 66204   2011     1
## 66205   2011     1
## 66785   2011     1
## 66786   2011     1
## 67336   2011     1
## 67337   2011     1
## 67826   2011     1
## 68334   2011     1
## 68906   2011     1
## 68907   2011     1
## 69454   2011     1
## 69966   2011     1
## 69967   2011     1
## 70541   2011     1
## 70542   2011     1
## 71084   2011     1
## 71085   2011     1
## 71571   2011     1
## 72078   2011     1
## 72650   2011     1
## 72651   2011     1
## 73198   2011     1
## 73710   2011     1
## 73711   2011     1
## 74284   2011     1
## 74285   2011     1
## 74650   2011     1
## 74655   2011     1
## 74656   2011     1
## 74665   2011     1
## 74667   2011     1
## 74675   2011     1
## 74678   2011     1
## 74683   2011     1
## 74684   2011     1
## 74686   2011     1
## 74691   2011     1
## 74695   2011     1
## 74701   2011     1
## 74705   2011     1
## 74706   2011     1
## 74709   2011     1
## 74712   2011     1
## 74717   2011     1
## 74724   2011     1
## 74729   2011     1
## 74731   2011     1
## 74736   2011     1
## 74739   2011     1
## 74740   2011     1
## 74742   2011     1
## 74748   2011     1
## 74754   2011     1
## 74758   2011     1
## 74765   2011     1
## 74767   2011     1
## 74770   2011     1
## 74777   2011     1
## 74781   2011     1
## 74784   2011     1
## 74785   2011     1
## 74788   2011     1
## 74789   2011     1
## 74796   2011     1
## 74798   2011     1
## 74803   2011     1
## 74804   2011     1
## 74808   2011     1
## 74810   2011     1
## 74812   2011     1
## 74816   2011     1
## 74828   2011     1
## 74836   2011     1
## 74842   2011     1
## 74844   2011     1
## 74850   2011     1
## 74852   2011     1
## 74854   2011     1
## 74855   2011     1
## 74857   2011     1
## 74859   2011     1
## 74861   2011     1
## 74864   2011     1
## 74866   2011     1
## 74867   2011     1
## 74870   2011     1
## 74874   2011     1
## 74875   2011     1
## 74877   2011     1
## 74882   2011     1
## 74886   2011     1
## 74892   2011     1
## 74895   2011     1
## 74900   2011     1
## 74902   2011     1
## 74903   2011     1
## 74909   2011     1
## 74910   2011     1
## 74916   2011     1
## 74923   2011     1
## 74924   2011     1
## 74929   2011     1
## 74930   2011     1
## 74931   2011     1
## 74941   2011     1
## 74943   2011     1
## 74949   2011     1
## 74954   2011     1
## 74956   2011     1
## 74962   2011     1
## 74964   2011     1
## 74966   2011     1
## 74968   2011     1
## 74971   2011     1
## 74975   2011     1
## 74978   2011     1
## 74981   2011     1
## 74985   2011     1
## 74990   2011     1
## 74993   2011     1
## 74994   2011     1
## 75001   2011     1
## 75004   2011     1
## 75010   2011     1
## 75014   2011     1
## 75015   2011     1
## 75018   2011     1
## 75025   2011     1
## 75029   2011     1
## 75030   2011     1
## 75031   2011     1
## 75032   2011     1
## 75033   2011     1
## 75034   2011     1
## 75036   2011     1
## 75039   2011     1
## 75040   2011     1
## 75043   2011     1
## 75044   2011     1
## 75045   2011     1
## 75050   2011     1
## 75052   2011     1
## 75054   2011     1
## 75057   2011     1
## 75062   2011     1
## 75067   2011     1
## 75073   2011     1
## 75074   2011     1
## 75083   2011     1
## 75084   2011     1
## 75088   2011     1
## 75091   2011     1
## 75094   2011     1
## 75096   2011     1
## 75098   2011     1
## 75100   2011     1
## 75101   2011     1
## 75103   2011     1
## 75112   2011     1
## 75114   2011     1
## 75115   2011     1
## 75119   2011     1
## 75121   2011     1
## 75127   2011     1
## 75131   2011     1
## 75133   2011     1
## 75140   2011     1
## 75142   2011     1
## 75144   2011     1
## 75147   2011     1
## 75149   2011     1
##  [ reached getOption("max.print") -- omitted 226996 rows ]
```

```r
# traditional way
hflights[, c("Year", "Month")]
```

```
##         Year Month
## 5424    2011     1
## 5425    2011     1
## 5426    2011     1
## 5427    2011     1
## 5428    2011     1
## 5429    2011     1
## 5430    2011     1
## 5431    2011     1
## 5432    2011     1
## 5433    2011     1
## 5434    2011     1
## 5435    2011     1
## 5436    2011     1
## 5437    2011     1
## 5438    2011     1
## 5439    2011     1
## 5440    2011     1
## 5441    2011     1
## 5442    2011     1
## 5443    2011     1
## 5444    2011     1
## 5445    2011     1
## 5446    2011     1
## 5447    2011     1
## 5448    2011     1
## 5449    2011     1
## 5450    2011     1
## 5451    2011     1
## 5452    2011     1
## 5453    2011     1
## 5454    2011     1
## 6343    2011     1
## 6344    2011     1
## 6345    2011     1
## 6346    2011     1
## 6347    2011     1
## 6348    2011     1
## 6349    2011     1
## 6350    2011     1
## 6351    2011     1
## 6352    2011     1
## 6353    2011     1
## 6354    2011     1
## 6355    2011     1
## 6356    2011     1
## 6357    2011     1
## 6358    2011     1
## 6359    2011     1
## 6360    2011     1
## 6361    2011     1
## 6362    2011     1
## 6363    2011     1
## 6364    2011     1
## 6365    2011     1
## 6366    2011     1
## 6367    2011     1
## 6368    2011     1
## 6369    2011     1
## 6370    2011     1
## 6371    2011     1
## 6372    2011     1
## 6373    2011     1
## 8186    2011     1
## 8187    2011     1
## 8188    2011     1
## 8189    2011     1
## 8190    2011     1
## 8191    2011     1
## 8192    2011     1
## 8193    2011     1
## 8194    2011     1
## 8195    2011     1
## 8196    2011     1
## 8197    2011     1
## 8198    2011     1
## 8199    2011     1
## 8200    2011     1
## 8201    2011     1
## 8202    2011     1
## 8203    2011     1
## 8204    2011     1
## 8205    2011     1
## 8206    2011     1
## 8207    2011     1
## 8208    2011     1
## 8209    2011     1
## 8210    2011     1
## 8211    2011     1
## 19266   2011     1
## 19267   2011     1
## 19268   2011     1
## 19269   2011     1
## 19270   2011     1
## 19271   2011     1
## 19272   2011     1
## 19273   2011     1
## 19274   2011     1
## 19275   2011     1
## 19276   2011     1
## 19277   2011     1
## 19278   2011     1
## 19279   2011     1
## 19280   2011     1
## 19281   2011     1
## 19282   2011     1
## 19283   2011     1
## 19284   2011     1
## 19285   2011     1
## 19286   2011     1
## 19287   2011     1
## 19288   2011     1
## 19289   2011     1
## 19290   2011     1
## 19291   2011     1
## 19292   2011     1
## 19293   2011     1
## 19294   2011     1
## 19295   2011     1
## 19296   2011     1
## 23655   2011     1
## 23656   2011     1
## 23657   2011     1
## 23658   2011     1
## 23659   2011     1
## 23660   2011     1
## 23661   2011     1
## 23662   2011     1
## 23663   2011     1
## 23664   2011     1
## 23665   2011     1
## 23666   2011     1
## 23667   2011     1
## 23668   2011     1
## 23669   2011     1
## 23670   2011     1
## 23671   2011     1
## 23672   2011     1
## 23673   2011     1
## 23674   2011     1
## 23675   2011     1
## 23676   2011     1
## 23677   2011     1
## 23678   2011     1
## 23679   2011     1
## 23680   2011     1
## 23681   2011     1
## 23682   2011     1
## 23683   2011     1
## 23684   2011     1
## 23685   2011     1
## 27063   2011     1
## 27064   2011     1
## 27065   2011     1
## 27066   2011     1
## 27067   2011     1
## 27068   2011     1
## 27069   2011     1
## 27070   2011     1
## 27071   2011     1
## 27072   2011     1
## 27073   2011     1
## 27074   2011     1
## 27075   2011     1
## 27076   2011     1
## 27077   2011     1
## 27078   2011     1
## 27079   2011     1
## 27080   2011     1
## 27081   2011     1
## 27082   2011     1
## 27083   2011     1
## 33051   2011     1
## 33052   2011     1
## 33053   2011     1
## 33054   2011     1
## 33055   2011     1
## 33056   2011     1
## 33057   2011     1
## 33058   2011     1
## 33059   2011     1
## 33060   2011     1
## 33061   2011     1
## 33062   2011     1
## 33063   2011     1
## 33064   2011     1
## 33065   2011     1
## 33066   2011     1
## 33067   2011     1
## 33068   2011     1
## 33069   2011     1
## 33070   2011     1
## 33071   2011     1
## 33072   2011     1
## 33073   2011     1
## 33074   2011     1
## 33075   2011     1
## 33076   2011     1
## 33077   2011     1
## 33078   2011     1
## 33079   2011     1
## 33080   2011     1
## 33081   2011     1
## 35256   2011     1
## 35257   2011     1
## 35258   2011     1
## 35259   2011     1
## 35260   2011     1
## 35261   2011     1
## 35262   2011     1
## 35263   2011     1
## 35264   2011     1
## 35265   2011     1
## 35266   2011     1
## 35267   2011     1
## 35268   2011     1
## 35269   2011     1
## 35270   2011     1
## 35271   2011     1
## 35272   2011     1
## 35273   2011     1
## 35274   2011     1
## 35275   2011     1
## 35276   2011     1
## 35277   2011     1
## 35278   2011     1
## 35279   2011     1
## 35280   2011     1
## 35281   2011     1
## 35282   2011     1
## 35283   2011     1
## 35284   2011     1
## 35285   2011     1
## 35286   2011     1
## 35375   2011     1
## 35376   2011     1
## 35377   2011     1
## 35378   2011     1
## 35379   2011     1
## 35380   2011     1
## 35381   2011     1
## 35382   2011     1
## 35383   2011     1
## 39453   2011     1
## 39454   2011     1
## 39455   2011     1
## 39456   2011     1
## 39457   2011     1
## 39458   2011     1
## 39459   2011     1
## 39460   2011     1
## 39461   2011     1
## 39462   2011     1
## 39463   2011     1
## 39464   2011     1
## 39465   2011     1
## 39466   2011     1
## 39467   2011     1
## 39468   2011     1
## 39469   2011     1
## 39470   2011     1
## 39471   2011     1
## 39472   2011     1
## 39473   2011     1
## 39474   2011     1
## 39475   2011     1
## 39476   2011     1
## 39477   2011     1
## 39478   2011     1
## 39479   2011     1
## 39480   2011     1
## 39481   2011     1
## 39482   2011     1
## 39483   2011     1
## 46433   2011     1
## 46788   2011     1
## 47191   2011     1
## 47585   2011     1
## 47933   2011     1
## 48343   2011     1
## 48672   2011     1
## 49014   2011     1
## 49394   2011     1
## 49788   2011     1
## 50174   2011     1
## 50499   2011     1
## 50905   2011     1
## 51270   2011     1
## 51599   2011     1
## 51976   2011     1
## 52351   2011     1
## 52723   2011     1
## 53076   2011     1
## 53497   2011     1
## 53832   2011     1
## 54167   2011     1
## 54534   2011     1
## 54947   2011     1
## 55324   2011     1
## 55688   2011     1
## 56057   2011     1
## 56410   2011     1
## 56750   2011     1
## 57125   2011     1
## 57472   2011     1
## 57719   2011     1
## 57720   2011     1
## 58343   2011     1
## 58344   2011     1
## 58983   2011     1
## 58984   2011     1
## 59614   2011     1
## 59615   2011     1
## 60195   2011     1
## 60196   2011     1
## 60734   2011     1
## 61317   2011     1
## 61318   2011     1
## 61875   2011     1
## 62403   2011     1
## 62404   2011     1
## 62989   2011     1
## 62990   2011     1
## 63545   2011     1
## 63546   2011     1
## 64043   2011     1
## 64557   2011     1
## 65133   2011     1
## 65134   2011     1
## 65685   2011     1
## 66204   2011     1
## 66205   2011     1
## 66785   2011     1
## 66786   2011     1
## 67336   2011     1
## 67337   2011     1
## 67826   2011     1
## 68334   2011     1
## 68906   2011     1
## 68907   2011     1
## 69454   2011     1
## 69966   2011     1
## 69967   2011     1
## 70541   2011     1
## 70542   2011     1
## 71084   2011     1
## 71085   2011     1
## 71571   2011     1
## 72078   2011     1
## 72650   2011     1
## 72651   2011     1
## 73198   2011     1
## 73710   2011     1
## 73711   2011     1
## 74284   2011     1
## 74285   2011     1
## 74650   2011     1
## 74655   2011     1
## 74656   2011     1
## 74665   2011     1
## 74667   2011     1
## 74675   2011     1
## 74678   2011     1
## 74683   2011     1
## 74684   2011     1
## 74686   2011     1
## 74691   2011     1
## 74695   2011     1
## 74701   2011     1
## 74705   2011     1
## 74706   2011     1
## 74709   2011     1
## 74712   2011     1
## 74717   2011     1
## 74724   2011     1
## 74729   2011     1
## 74731   2011     1
## 74736   2011     1
## 74739   2011     1
## 74740   2011     1
## 74742   2011     1
## 74748   2011     1
## 74754   2011     1
## 74758   2011     1
## 74765   2011     1
## 74767   2011     1
## 74770   2011     1
## 74777   2011     1
## 74781   2011     1
## 74784   2011     1
## 74785   2011     1
## 74788   2011     1
## 74789   2011     1
## 74796   2011     1
## 74798   2011     1
## 74803   2011     1
## 74804   2011     1
## 74808   2011     1
## 74810   2011     1
## 74812   2011     1
## 74816   2011     1
## 74828   2011     1
## 74836   2011     1
## 74842   2011     1
## 74844   2011     1
## 74850   2011     1
## 74852   2011     1
## 74854   2011     1
## 74855   2011     1
## 74857   2011     1
## 74859   2011     1
## 74861   2011     1
## 74864   2011     1
## 74866   2011     1
## 74867   2011     1
## 74870   2011     1
## 74874   2011     1
## 74875   2011     1
## 74877   2011     1
## 74882   2011     1
## 74886   2011     1
## 74892   2011     1
## 74895   2011     1
## 74900   2011     1
## 74902   2011     1
## 74903   2011     1
## 74909   2011     1
## 74910   2011     1
## 74916   2011     1
## 74923   2011     1
## 74924   2011     1
## 74929   2011     1
## 74930   2011     1
## 74931   2011     1
## 74941   2011     1
## 74943   2011     1
## 74949   2011     1
## 74954   2011     1
## 74956   2011     1
## 74962   2011     1
## 74964   2011     1
## 74966   2011     1
## 74968   2011     1
## 74971   2011     1
## 74975   2011     1
## 74978   2011     1
## 74981   2011     1
## 74985   2011     1
## 74990   2011     1
## 74993   2011     1
## 74994   2011     1
## 75001   2011     1
## 75004   2011     1
## 75010   2011     1
## 75014   2011     1
## 75015   2011     1
## 75018   2011     1
## 75025   2011     1
## 75029   2011     1
## 75030   2011     1
## 75031   2011     1
## 75032   2011     1
## 75033   2011     1
## 75034   2011     1
## 75036   2011     1
## 75039   2011     1
## 75040   2011     1
## 75043   2011     1
## 75044   2011     1
## 75045   2011     1
## 75050   2011     1
## 75052   2011     1
## 75054   2011     1
## 75057   2011     1
## 75062   2011     1
## 75067   2011     1
## 75073   2011     1
## 75074   2011     1
## 75083   2011     1
## 75084   2011     1
## 75088   2011     1
## 75091   2011     1
## 75094   2011     1
## 75096   2011     1
## 75098   2011     1
## 75100   2011     1
## 75101   2011     1
## 75103   2011     1
## 75112   2011     1
## 75114   2011     1
## 75115   2011     1
## 75119   2011     1
## 75121   2011     1
## 75127   2011     1
## 75131   2011     1
## 75133   2011     1
## 75140   2011     1
## 75142   2011     1
## 75144   2011     1
## 75147   2011     1
## 75149   2011     1
##  [ reached getOption("max.print") -- omitted 226996 rows ]
```

```r
# add column name 'gain'
mutate(hflights, gain = ArrDelay - DepDelay)
```

```
##         Year Month DayofMonth DayOfWeek DepTime ArrTime UniqueCarrier FlightNum TailNum
## 5424    2011     1          1         6    1400    1500            AA       428  N576AA
## 5425    2011     1          2         7    1401    1501            AA       428  N557AA
## 5426    2011     1          3         1    1352    1502            AA       428  N541AA
## 5427    2011     1          4         2    1403    1513            AA       428  N403AA
## 5428    2011     1          5         3    1405    1507            AA       428  N492AA
## 5429    2011     1          6         4    1359    1503            AA       428  N262AA
## 5430    2011     1          7         5    1359    1509            AA       428  N493AA
## 5431    2011     1          8         6    1355    1454            AA       428  N477AA
## 5432    2011     1          9         7    1443    1554            AA       428  N476AA
## 5433    2011     1         10         1    1443    1553            AA       428  N504AA
## 5434    2011     1         11         2    1429    1539            AA       428  N565AA
## 5435    2011     1         12         3    1419    1515            AA       428  N577AA
## 5436    2011     1         13         4    1358    1501            AA       428  N476AA
## 5437    2011     1         14         5    1357    1504            AA       428  N552AA
## 5438    2011     1         15         6    1359    1459            AA       428  N462AA
## 5439    2011     1         16         7    1359    1509            AA       428  N555AA
## 5440    2011     1         17         1    1530    1634            AA       428  N518AA
## 5441    2011     1         18         2    1408    1508            AA       428  N507AA
## 5442    2011     1         19         3    1356    1503            AA       428  N523AA
## 5443    2011     1         20         4    1507    1622            AA       428  N425AA
## 5444    2011     1         21         5    1357    1459            AA       428  N251AA
## 5445    2011     1         22         6    1355    1456            AA       428  N551AA
## 5446    2011     1         23         7    1356    1501            AA       428  N479AA
## 5447    2011     1         24         1    1356    1513            AA       428  N531AA
## 5448    2011     1         25         2    1352    1452            AA       428  N561AA
## 5449    2011     1         26         3    1353    1455            AA       428  N541AA
## 5450    2011     1         27         4    1356    1458            AA       428  N512AA
## 5451    2011     1         28         5    1359    1505            AA       428  N4UBAA
## 5452    2011     1         29         6    1355    1455            AA       428  N491AA
## 5453    2011     1         30         7    1359    1456            AA       428  N561AA
## 5454    2011     1         31         1    1441    1553            AA       428  N505AA
## 6343    2011     1          1         6     728     840            AA       460  N520AA
## 6344    2011     1          2         7     719     821            AA       460  N537AA
## 6345    2011     1          3         1     717     834            AA       460  N512AA
## 6346    2011     1          4         2     714     821            AA       460  N478AA
## 6347    2011     1          5         3     718     822            AA       460  N551AA
## 6348    2011     1          6         4     719     821            AA       460  N251AA
## 6349    2011     1          7         5     711     827            AA       460  N478AA
## 6350    2011     1          8         6     713     805            AA       460  N550AA
## 6351    2011     1          9         7     714     829            AA       460  N586AA
## 6352    2011     1         10         1     715     818            AA       460  N587AA
## 6353    2011     1         11         2     717     820            AA       460  N574AA
## 6354    2011     1         12         3     714     814            AA       460  N580AA
## 6355    2011     1         13         4     722     841            AA       460  N586AA
## 6356    2011     1         14         5     715     828            AA       460  N468AA
##         ActualElapsedTime AirTime ArrDelay DepDelay Origin Dest Distance TaxiIn TaxiOut Cancelled
## 5424                   60      40      -10        0    IAH  DFW      224      7      13         0
## 5425                   60      45       -9        1    IAH  DFW      224      6       9         0
## 5426                   70      48       -8       -8    IAH  DFW      224      5      17         0
## 5427                   70      39        3        3    IAH  DFW      224      9      22         0
## 5428                   62      44       -3        5    IAH  DFW      224      9       9         0
## 5429                   64      45       -7       -1    IAH  DFW      224      6      13         0
## 5430                   70      43       -1       -1    IAH  DFW      224     12      15         0
## 5431                   59      40      -16       -5    IAH  DFW      224      7      12         0
## 5432                   71      41       44       43    IAH  DFW      224      8      22         0
## 5433                   70      45       43       43    IAH  DFW      224      6      19         0
## 5434                   70      42       29       29    IAH  DFW      224      8      20         0
## 5435                   56      41        5       19    IAH  DFW      224      4      11         0
## 5436                   63      44       -9       -2    IAH  DFW      224      6      13         0
## 5437                   67      47       -6       -3    IAH  DFW      224      5      15         0
## 5438                   60      44      -11       -1    IAH  DFW      224      6      10         0
## 5439                   70      41       -1       -1    IAH  DFW      224     12      17         0
## 5440                   64      48       84       90    IAH  DFW      224      8       8         0
## 5441                   60      42       -2        8    IAH  DFW      224      7      11         0
## 5442                   67      46       -7       -4    IAH  DFW      224     10      11         0
## 5443                   75      42       72       67    IAH  DFW      224      9      24         0
## 5444                   62      47      -11       -3    IAH  DFW      224      6       9         0
## 5445                   61      44      -14       -5    IAH  DFW      224      9       8         0
## 5446                   65      40       -9       -4    IAH  DFW      224      7      18         0
## 5447                   77      43        3       -4    IAH  DFW      224      6      28         0
## 5448                   60      40      -18       -8    IAH  DFW      224      7      13         0
## 5449                   62      40      -15       -7    IAH  DFW      224      8      14         0
## 5450                   62      40      -12       -4    IAH  DFW      224     12      10         0
## 5451                   66      46       -5       -1    IAH  DFW      224      8      12         0
## 5452                   60      46      -15       -5    IAH  DFW      224      7       7         0
## 5453                   57      39      -14       -1    IAH  DFW      224      7      11         0
## 5454                   72      39       43       41    IAH  DFW      224      8      25         0
## 6343                   72      41        5        8    IAH  DFW      224      6      25         0
## 6344                   62      43      -14       -1    IAH  DFW      224      9      10         0
## 6345                   77      46       -1       -3    IAH  DFW      224     21      10         0
## 6346                   67      46      -14       -6    IAH  DFW      224      6      15         0
## 6347                   64      44      -13       -2    IAH  DFW      224      7      13         0
## 6348                   62      44      -14       -1    IAH  DFW      224      8      10         0
## 6349                   76      42       -8       -9    IAH  DFW      224     24      10         0
## 6350                   52      40      -30       -7    IAH  DFW      224      3       9         0
## 6351                   75      51       -6       -6    IAH  DFW      224     11      13         0
## 6352                   63      44      -17       -5    IAH  DFW      224      8      11         0
## 6353                   63      44      -15       -3    IAH  DFW      224      7      12         0
## 6354                   60      42      -21       -6    IAH  DFW      224     10       8         0
## 6355                   79      49        6        2    IAH  DFW      224     16      14         0
## 6356                   73      47       -7       -5    IAH  DFW      224     15      11         0
##         CancellationCode Diverted gain
## 5424                            0  -10
## 5425                            0  -10
## 5426                            0    0
## 5427                            0    0
## 5428                            0   -8
## 5429                            0   -6
## 5430                            0    0
## 5431                            0  -11
## 5432                            0    1
## 5433                            0    0
## 5434                            0    0
## 5435                            0  -14
## 5436                            0   -7
## 5437                            0   -3
## 5438                            0  -10
## 5439                            0    0
## 5440                            0   -6
## 5441                            0  -10
## 5442                            0   -3
## 5443                            0    5
## 5444                            0   -8
## 5445                            0   -9
## 5446                            0   -5
## 5447                            0    7
## 5448                            0  -10
## 5449                            0   -8
## 5450                            0   -8
## 5451                            0   -4
## 5452                            0  -10
## 5453                            0  -13
## 5454                            0    2
## 6343                            0   -3
## 6344                            0  -13
## 6345                            0    2
## 6346                            0   -8
## 6347                            0  -11
## 6348                            0  -13
## 6349                            0    1
## 6350                            0  -23
## 6351                            0    0
## 6352                            0  -12
## 6353                            0  -12
## 6354                            0  -15
## 6355                            0    4
## 6356                            0   -2
##  [ reached getOption("max.print") -- omitted 227451 rows ]
```

```r
# arrange
arrange(hflights, Month, desc(DayofMonth))
```

```
##        Year Month DayofMonth DayOfWeek DepTime ArrTime UniqueCarrier FlightNum TailNum
## 1      2011     1         31         1    1441    1553            AA       428  N505AA
## 2      2011     1         31         1     718     816            AA       460  N493AA
## 3      2011     1         31         1    1954    2105            AA       533  N477AA
## 4      2011     1         31         1    1656    1758            AA      1121  N455AA
## 5      2011     1         31         1    1757    2101            AA      1294  N3DJAA
## 6      2011     1         31         1     941    1054            AA      1436  N517AA
## 7      2011     1         31         1    1013    1336            AA      1700  N3FRAA
## 8      2011     1         31         1    1205    1317            AA      1820  N511AA
## 9      2011     1         31         1     556     857            AA      1994  N3BTAA
## 10     2011     1         31         1    1827    2111            AS       731  N607AS
## 11     2011     1         31         1     659    1111            B6       620  N661JB
## 12     2011     1         31         1    1532    1942            B6       624  N629JB
## 13     2011     1         31         1     924    1413            CO         1  N69063
## 14     2011     1         31         1    1825    1925            CO         5  N17245
## 15     2011     1         31         1    1554    1650            CO         6  N77520
## 16     2011     1         31         1    1522    1632            CO        33  N16647
## 17     2011     1         31         1    1536    1635            CO        35  N35204
## 18     2011     1         31         1    1916    2103            CO        47  N76522
## 19     2011     1         31         1     747     936            CO        52  N67134
## 20     2011     1         31         1    1803    1927            CO        59  N57870
## 21     2011     1         31         1    1206    1631            CO        60  N68159
## 22     2011     1         31         1    1425    1848            CO        62  N17126
## 23     2011     1         31         1     607    1022            CO        89  N76529
## 24     2011     1         31         1    1041    1449            CO       106  N66051
## 25     2011     1         31         1     728     856            CO       128  N75436
## 26     2011     1         31         1    1433    1629            CO       137  N73283
## 27     2011     1         31         1    1422    1647            CO       146  N57862
## 28     2011     1         31         1    1750    1921            CO       150  N34282
## 29     2011     1         31         1    1442    1842            CO       158  N13750
## 30     2011     1         31         1     851    1052            CO       170  N35407
## 31     2011     1         31         1    1919    2231            CO       190  N35260
## 32     2011     1         31         1    1155    1324            CO       197  N75853
## 33     2011     1         31         1     726     915            CO       199  N14228
## 34     2011     1         31         1    1259    1554            CO       206  N39418
## 35     2011     1         31         1    2116    2344            CO       209  N24715
## 36     2011     1         31         1    1551    2009            CO       210  N37408
## 37     2011     1         31         1    1024    1621            CO       212  N53441
## 38     2011     1         31         1     912    1138            CO       220  N33132
## 39     2011     1         31         1    1020    1421            CO       226  N19621
## 40     2011     1         31         1     916    1336            CO       232  N33266
## 41     2011     1         31         1    1301    1356            CO       241  N14629
## 42     2011     1         31         1    1554    1918            CO       244  N37274
## 43     2011     1         31         1    1850    2211            CO       250  N59630
## 44     2011     1         31         1     727    1120            CO       258  N77520
## 45     2011     1         31         1    1240    1526            CO       267  N45440
## 46     2011     1         31         1    1129    1351            CO       270  N37420
## 47     2011     1         31         1    1615    1741            CO       275  N14242
##        ActualElapsedTime AirTime ArrDelay DepDelay Origin Dest Distance TaxiIn TaxiOut Cancelled
## 1                     72      39       43       41    IAH  DFW      224      8      25         0
## 2                     58      40      -19       -2    IAH  DFW      224     10       8         0
## 3                     71      38      -15      -11    IAH  DFW      224     11      22         0
## 4                     62      41       13       26    IAH  DFW      224      9      12         0
## 5                    124     104      -14        2    IAH  MIA      964      4      16         0
## 6                     73      44       29       31    IAH  DFW      224      5      24         0
## 7                    143     100       -4       -7    IAH  MIA      964     26      17         0
## 8                     72      42        7        0    IAH  DFW      224      8      22         0
## 9                    121     106      -18       -4    IAH  MIA      964      4      11         0
## 10                   284     259        1        2    IAH  SEA     1874      6      19         0
## 11                   192     172       -6       -1    HOU  JFK     1428      8      12         0
## 12                   190     169      -18       -3    HOU  JFK     1428      9      12         0
## 13                   529     492       23       -1    IAH  HNL     3904      6      31         0
## 14                    60      42       -9        0    IAH  MSY      305      3      15         0
## 15                    56      40       -5       -1    IAH  SAT      191      2      14         0
## 16                    70      42       -2       -3    IAH  MSY      305      7      21         0
## 17                    59      32        7        1    IAH  AUS      140      7      20         0
## 18                   227     199        2        6    IAH  LAX     1379      8      20         0
## 19                   229     201        5        2    IAH  LAX     1379     11      17         0
## 20                   144     116       15       28    IAH  DEN      862     12      16         0
## 21                   205     165       -2        1    IAH  EWR     1400     29      11         0
## 22                   203     163       -9        0    IAH  EWR     1400     16      24         0
## 23                   195     175        2        7    IAH  EWR     1400      6      14         0
## 24                   188     162      -26       -4    IAH  EWR     1400      8      18         0
## 25                    88      49       18       -2    IAH  MSY      305      6      33         0
## 26                   236     199       14        5    IAH  LAX     1379     10      27         0
## 27                   145     114       64       77    IAH  ORD      925     15      16         0
## 28                   211     189        6       15    IAH  ONT     1334      5      17         0
## 29                   180     142        7       -3    IAH  DCA     1208      4      34         0
## 30                   241     225      -27        1    IAH  SFO     1635      6      10         0
## 31                   132     107      -12       -1    IAH  MIA      964      5      20         0
## 32                   209     172        3        0    IAH  LAS     1222      8      29         0
## 33                   169     128        8        1    IAH  DEN      862     12      29         0
## 34                   115      91      -10       -1    IAH  TPA      787      4      20         0
## 35                   268     256      -15       -7    IAH  PDX     1825      4       8         0
## 36                   198     166      -15        1    IAH  EWR     1400     16      16         0
## 37                   237     215       -4        9    IAH  SJU     2007      6      16         0
## 38                   206     161       32        7    IAH  PHX     1009      8      37         0
## 39                   181     161        2        0    IAH  BWI     1235      5      15         0
## 40                   200     165      -15       -4    IAH  LGA     1416      4      31         0
## 41                    55      27       -2       -4    IAH  AUS      140      5      23         0
## 42                   144     121      -16        9    IAH  CLE     1091      5      18         0
## 43                   141     121      -18        0    IAH  RDU     1043      5      15         0
## 44                   173     145       -1       -3    IAH  DCA     1208      4      24         0
## 45                   286     263        7        5    IAH  SEA     1874      9      14         0
## 46                   262     228        1        4    IAH  SFO     1635      7      27         0
## 47                   146     122       16       25    IAH  DEN      862      8      16         0
##        CancellationCode Diverted
## 1                              0
## 2                              0
## 3                              0
## 4                              0
## 5                              0
## 6                              0
## 7                              0
## 8                              0
## 9                              0
## 10                             0
## 11                             0
## 12                             0
## 13                             0
## 14                             0
## 15                             0
## 16                             0
## 17                             0
## 18                             0
## 19                             0
## 20                             0
## 21                             0
## 22                             0
## 23                             0
## 24                             0
## 25                             0
## 26                             0
## 27                             0
## 28                             0
## 29                             0
## 30                             0
## 31                             0
## 32                             0
## 33                             0
## 34                             0
## 35                             0
## 36                             0
## 37                             0
## 38                             0
## 39                             0
## 40                             0
## 41                             0
## 42                             0
## 43                             0
## 44                             0
## 45                             0
## 46                             0
## 47                             0
##  [ reached getOption("max.print") -- omitted 227449 rows ]
```

```r
summarise(hflights, delay = mean(DepDelay, na.rm = TRUE))
```

```
##      delay
## 1 9.444951
```

```r
mean(hflights$DepDelay, na.rm = TRUE)
```

```
## [1] 9.444951
```

```r
select(hflights, Year:DayOfWeek)
```

```
##         Year Month DayofMonth DayOfWeek
## 5424    2011     1          1         6
## 5425    2011     1          2         7
## 5426    2011     1          3         1
## 5427    2011     1          4         2
## 5428    2011     1          5         3
## 5429    2011     1          6         4
## 5430    2011     1          7         5
## 5431    2011     1          8         6
## 5432    2011     1          9         7
## 5433    2011     1         10         1
## 5434    2011     1         11         2
## 5435    2011     1         12         3
## 5436    2011     1         13         4
## 5437    2011     1         14         5
## 5438    2011     1         15         6
## 5439    2011     1         16         7
## 5440    2011     1         17         1
## 5441    2011     1         18         2
## 5442    2011     1         19         3
## 5443    2011     1         20         4
## 5444    2011     1         21         5
## 5445    2011     1         22         6
## 5446    2011     1         23         7
## 5447    2011     1         24         1
## 5448    2011     1         25         2
## 5449    2011     1         26         3
## 5450    2011     1         27         4
## 5451    2011     1         28         5
## 5452    2011     1         29         6
## 5453    2011     1         30         7
## 5454    2011     1         31         1
## 6343    2011     1          1         6
## 6344    2011     1          2         7
## 6345    2011     1          3         1
## 6346    2011     1          4         2
## 6347    2011     1          5         3
## 6348    2011     1          6         4
## 6349    2011     1          7         5
## 6350    2011     1          8         6
## 6351    2011     1          9         7
## 6352    2011     1         10         1
## 6353    2011     1         11         2
## 6354    2011     1         12         3
## 6355    2011     1         13         4
## 6356    2011     1         14         5
## 6357    2011     1         15         6
## 6358    2011     1         16         7
## 6359    2011     1         17         1
## 6360    2011     1         18         2
## 6361    2011     1         19         3
## 6362    2011     1         20         4
## 6363    2011     1         21         5
## 6364    2011     1         22         6
## 6365    2011     1         23         7
## 6366    2011     1         24         1
## 6367    2011     1         25         2
## 6368    2011     1         26         3
## 6369    2011     1         27         4
## 6370    2011     1         28         5
## 6371    2011     1         29         6
## 6372    2011     1         30         7
## 6373    2011     1         31         1
## 8186    2011     1          2         7
## 8187    2011     1          3         1
## 8188    2011     1          4         2
## 8189    2011     1          5         3
## 8190    2011     1          6         4
## 8191    2011     1          7         5
## 8192    2011     1          9         7
## 8193    2011     1         10         1
## 8194    2011     1         11         2
## 8195    2011     1         12         3
## 8196    2011     1         13         4
## 8197    2011     1         14         5
## 8198    2011     1         16         7
## 8199    2011     1         17         1
## 8200    2011     1         18         2
## 8201    2011     1         19         3
## 8202    2011     1         20         4
## 8203    2011     1         21         5
## 8204    2011     1         23         7
## 8205    2011     1         24         1
## 8206    2011     1         25         2
## 8207    2011     1         26         3
## 8208    2011     1         27         4
## 8209    2011     1         28         5
## 8210    2011     1         30         7
## 8211    2011     1         31         1
## 19266   2011     1          1         6
## 19267   2011     1          2         7
## 19268   2011     1          3         1
## 19269   2011     1          4         2
## 19270   2011     1          5         3
## 19271   2011     1          6         4
## 19272   2011     1          7         5
## 19273   2011     1          8         6
## 19274   2011     1          9         7
## 19275   2011     1         10         1
## 19276   2011     1         11         2
## 19277   2011     1         12         3
## 19278   2011     1         13         4
## 19279   2011     1         14         5
## 19280   2011     1         15         6
## 19281   2011     1         16         7
## 19282   2011     1         17         1
## 19283   2011     1         18         2
## 19284   2011     1         19         3
## 19285   2011     1         20         4
## 19286   2011     1         21         5
## 19287   2011     1         22         6
## 19288   2011     1         23         7
## 19289   2011     1         24         1
## 19290   2011     1         25         2
## 19291   2011     1         26         3
## 19292   2011     1         27         4
## 19293   2011     1         28         5
## 19294   2011     1         29         6
## 19295   2011     1         30         7
## 19296   2011     1         31         1
## 23655   2011     1          1         6
## 23656   2011     1          2         7
## 23657   2011     1          3         1
## 23658   2011     1          4         2
## 23659   2011     1          5         3
## 23660   2011     1          6         4
## 23661   2011     1          7         5
## 23662   2011     1          8         6
## 23663   2011     1          9         7
## 23664   2011     1         10         1
## 23665   2011     1         11         2
## 23666   2011     1         12         3
## 23667   2011     1         13         4
## 23668   2011     1         14         5
## 23669   2011     1         15         6
## 23670   2011     1         16         7
## 23671   2011     1         17         1
## 23672   2011     1         18         2
## 23673   2011     1         19         3
## 23674   2011     1         20         4
## 23675   2011     1         21         5
## 23676   2011     1         22         6
## 23677   2011     1         23         7
## 23678   2011     1         24         1
## 23679   2011     1         25         2
## 23680   2011     1         26         3
## 23681   2011     1         27         4
## 23682   2011     1         28         5
## 23683   2011     1         29         6
## 23684   2011     1         30         7
## 23685   2011     1         31         1
## 27063   2011     1          3         1
## 27064   2011     1          4         2
## 27065   2011     1          5         3
## 27066   2011     1          6         4
## 27067   2011     1          7         5
## 27068   2011     1         10         1
## 27069   2011     1         11         2
## 27070   2011     1         12         3
## 27071   2011     1         13         4
## 27072   2011     1         14         5
## 27073   2011     1         17         1
## 27074   2011     1         18         2
## 27075   2011     1         19         3
## 27076   2011     1         20         4
## 27077   2011     1         21         5
## 27078   2011     1         24         1
## 27079   2011     1         25         2
## 27080   2011     1         26         3
## 27081   2011     1         27         4
## 27082   2011     1         28         5
## 27083   2011     1         31         1
## 33051   2011     1          1         6
## 33052   2011     1          2         7
## 33053   2011     1          3         1
## 33054   2011     1          4         2
## 33055   2011     1          5         3
## 33056   2011     1          6         4
## 33057   2011     1          7         5
## 33058   2011     1          8         6
## 33059   2011     1          9         7
## 33060   2011     1         10         1
## 33061   2011     1         11         2
## 33062   2011     1         12         3
## 33063   2011     1         13         4
## 33064   2011     1         14         5
## 33065   2011     1         15         6
## 33066   2011     1         16         7
## 33067   2011     1         17         1
## 33068   2011     1         18         2
## 33069   2011     1         19         3
## 33070   2011     1         20         4
## 33071   2011     1         21         5
## 33072   2011     1         22         6
## 33073   2011     1         23         7
## 33074   2011     1         24         1
## 33075   2011     1         25         2
## 33076   2011     1         26         3
## 33077   2011     1         27         4
## 33078   2011     1         28         5
## 33079   2011     1         29         6
## 33080   2011     1         30         7
## 33081   2011     1         31         1
## 35256   2011     1          1         6
## 35257   2011     1          2         7
## 35258   2011     1          3         1
## 35259   2011     1          4         2
## 35260   2011     1          5         3
## 35261   2011     1          6         4
## 35262   2011     1          7         5
## 35263   2011     1          8         6
## 35264   2011     1          9         7
## 35265   2011     1         10         1
## 35266   2011     1         11         2
## 35267   2011     1         12         3
## 35268   2011     1         13         4
## 35269   2011     1         14         5
## 35270   2011     1         15         6
## 35271   2011     1         16         7
## 35272   2011     1         17         1
## 35273   2011     1         18         2
## 35274   2011     1         19         3
## 35275   2011     1         20         4
## 35276   2011     1         21         5
## 35277   2011     1         22         6
## 35278   2011     1         23         7
## 35279   2011     1         24         1
## 35280   2011     1         25         2
## 35281   2011     1         26         3
## 35282   2011     1         27         4
## 35283   2011     1         28         5
## 35284   2011     1         29         6
## 35285   2011     1         30         7
## 35286   2011     1         31         1
## 35375   2011     1          2         7
## 35376   2011     1          8         6
## 35377   2011     1          9         7
## 35378   2011     1         15         6
## 35379   2011     1         16         7
## 35380   2011     1         22         6
## 35381   2011     1         23         7
## 35382   2011     1         29         6
## 35383   2011     1         30         7
## 39453   2011     1          1         6
## 39454   2011     1          2         7
## 39455   2011     1          3         1
## 39456   2011     1          4         2
## 39457   2011     1          5         3
## 39458   2011     1          6         4
## 39459   2011     1          7         5
## 39460   2011     1          8         6
##  [ reached getOption("max.print") -- omitted 227246 rows ]
```

```r
select(hflights, -(Year:DayOfWeek))
```

```
##         DepTime ArrTime UniqueCarrier FlightNum TailNum ActualElapsedTime AirTime ArrDelay DepDelay
## 5424       1400    1500            AA       428  N576AA                60      40      -10        0
## 5425       1401    1501            AA       428  N557AA                60      45       -9        1
## 5426       1352    1502            AA       428  N541AA                70      48       -8       -8
## 5427       1403    1513            AA       428  N403AA                70      39        3        3
## 5428       1405    1507            AA       428  N492AA                62      44       -3        5
## 5429       1359    1503            AA       428  N262AA                64      45       -7       -1
## 5430       1359    1509            AA       428  N493AA                70      43       -1       -1
## 5431       1355    1454            AA       428  N477AA                59      40      -16       -5
## 5432       1443    1554            AA       428  N476AA                71      41       44       43
## 5433       1443    1553            AA       428  N504AA                70      45       43       43
## 5434       1429    1539            AA       428  N565AA                70      42       29       29
## 5435       1419    1515            AA       428  N577AA                56      41        5       19
## 5436       1358    1501            AA       428  N476AA                63      44       -9       -2
## 5437       1357    1504            AA       428  N552AA                67      47       -6       -3
## 5438       1359    1459            AA       428  N462AA                60      44      -11       -1
## 5439       1359    1509            AA       428  N555AA                70      41       -1       -1
## 5440       1530    1634            AA       428  N518AA                64      48       84       90
## 5441       1408    1508            AA       428  N507AA                60      42       -2        8
## 5442       1356    1503            AA       428  N523AA                67      46       -7       -4
## 5443       1507    1622            AA       428  N425AA                75      42       72       67
## 5444       1357    1459            AA       428  N251AA                62      47      -11       -3
## 5445       1355    1456            AA       428  N551AA                61      44      -14       -5
## 5446       1356    1501            AA       428  N479AA                65      40       -9       -4
## 5447       1356    1513            AA       428  N531AA                77      43        3       -4
## 5448       1352    1452            AA       428  N561AA                60      40      -18       -8
## 5449       1353    1455            AA       428  N541AA                62      40      -15       -7
## 5450       1356    1458            AA       428  N512AA                62      40      -12       -4
## 5451       1359    1505            AA       428  N4UBAA                66      46       -5       -1
## 5452       1355    1455            AA       428  N491AA                60      46      -15       -5
## 5453       1359    1456            AA       428  N561AA                57      39      -14       -1
## 5454       1441    1553            AA       428  N505AA                72      39       43       41
## 6343        728     840            AA       460  N520AA                72      41        5        8
## 6344        719     821            AA       460  N537AA                62      43      -14       -1
## 6345        717     834            AA       460  N512AA                77      46       -1       -3
## 6346        714     821            AA       460  N478AA                67      46      -14       -6
## 6347        718     822            AA       460  N551AA                64      44      -13       -2
## 6348        719     821            AA       460  N251AA                62      44      -14       -1
## 6349        711     827            AA       460  N478AA                76      42       -8       -9
## 6350        713     805            AA       460  N550AA                52      40      -30       -7
## 6351        714     829            AA       460  N586AA                75      51       -6       -6
## 6352        715     818            AA       460  N587AA                63      44      -17       -5
## 6353        717     820            AA       460  N574AA                63      44      -15       -3
## 6354        714     814            AA       460  N580AA                60      42      -21       -6
## 6355        722     841            AA       460  N586AA                79      49        6        2
## 6356        715     828            AA       460  N468AA                73      47       -7       -5
## 6357        719     833            AA       460  N251AA                74      49       -2       -1
## 6358        743     843            AA       460  N546AA                60      45        8       23
## 6359        724     842            AA       460  N559AA                78      54        7        4
## 6360        721     827            AA       460  N558AA                66      46       -8        1
## 6361        714     833            AA       460  N574AA                79      51       -2       -6
## 6362        719     822            AA       460  N471AA                63      44      -13       -1
## 6363        712     811            AA       460  N278AA                59      40      -24       -8
## 6364        717     829            AA       460  N499AA                72      47       -6       -3
## 6365        710     814            AA       460  N556AA                64      42      -21      -10
## 6366        731     904            AA       460  N545AA                93      42       29       11
## 6367        719     818            AA       460  N541AA                59      40      -17       -1
## 6368        716     824            AA       460  N512AA                68      44      -11       -4
## 6369        715     825            AA       460  N4UCAA                70      44      -10       -5
##         Origin Dest Distance TaxiIn TaxiOut Cancelled CancellationCode Diverted
## 5424       IAH  DFW      224      7      13         0                         0
## 5425       IAH  DFW      224      6       9         0                         0
## 5426       IAH  DFW      224      5      17         0                         0
## 5427       IAH  DFW      224      9      22         0                         0
## 5428       IAH  DFW      224      9       9         0                         0
## 5429       IAH  DFW      224      6      13         0                         0
## 5430       IAH  DFW      224     12      15         0                         0
## 5431       IAH  DFW      224      7      12         0                         0
## 5432       IAH  DFW      224      8      22         0                         0
## 5433       IAH  DFW      224      6      19         0                         0
## 5434       IAH  DFW      224      8      20         0                         0
## 5435       IAH  DFW      224      4      11         0                         0
## 5436       IAH  DFW      224      6      13         0                         0
## 5437       IAH  DFW      224      5      15         0                         0
## 5438       IAH  DFW      224      6      10         0                         0
## 5439       IAH  DFW      224     12      17         0                         0
## 5440       IAH  DFW      224      8       8         0                         0
## 5441       IAH  DFW      224      7      11         0                         0
## 5442       IAH  DFW      224     10      11         0                         0
## 5443       IAH  DFW      224      9      24         0                         0
## 5444       IAH  DFW      224      6       9         0                         0
## 5445       IAH  DFW      224      9       8         0                         0
## 5446       IAH  DFW      224      7      18         0                         0
## 5447       IAH  DFW      224      6      28         0                         0
## 5448       IAH  DFW      224      7      13         0                         0
## 5449       IAH  DFW      224      8      14         0                         0
## 5450       IAH  DFW      224     12      10         0                         0
## 5451       IAH  DFW      224      8      12         0                         0
## 5452       IAH  DFW      224      7       7         0                         0
## 5453       IAH  DFW      224      7      11         0                         0
## 5454       IAH  DFW      224      8      25         0                         0
## 6343       IAH  DFW      224      6      25         0                         0
## 6344       IAH  DFW      224      9      10         0                         0
## 6345       IAH  DFW      224     21      10         0                         0
## 6346       IAH  DFW      224      6      15         0                         0
## 6347       IAH  DFW      224      7      13         0                         0
## 6348       IAH  DFW      224      8      10         0                         0
## 6349       IAH  DFW      224     24      10         0                         0
## 6350       IAH  DFW      224      3       9         0                         0
## 6351       IAH  DFW      224     11      13         0                         0
## 6352       IAH  DFW      224      8      11         0                         0
## 6353       IAH  DFW      224      7      12         0                         0
## 6354       IAH  DFW      224     10       8         0                         0
## 6355       IAH  DFW      224     16      14         0                         0
## 6356       IAH  DFW      224     15      11         0                         0
## 6357       IAH  DFW      224     12      13         0                         0
## 6358       IAH  DFW      224      5      10         0                         0
## 6359       IAH  DFW      224     12      12         0                         0
## 6360       IAH  DFW      224      7      13         0                         0
## 6361       IAH  DFW      224     14      14         0                         0
## 6362       IAH  DFW      224      8      11         0                         0
## 6363       IAH  DFW      224     11       8         0                         0
## 6364       IAH  DFW      224     18       7         0                         0
## 6365       IAH  DFW      224     11      11         0                         0
## 6366       IAH  DFW      224     14      37         0                         0
## 6367       IAH  DFW      224      8      11         0                         0
## 6368       IAH  DFW      224     10      14         0                         0
## 6369       IAH  DFW      224     16      10         0                         0
##  [ reached getOption("max.print") -- omitted 227438 rows ]
```

```r
summarise(hflights, delay = mean(DepDelay, na.rm = TRUE))
```

```
##      delay
## 1 9.444951
```


```r
planes <- group_by(hflights, TailNum)
delay <- summarise(planes, count = n(), dist = mean(Distance, na.rm = TRUE), delay = mean(ArrDelay, na.rm = TRUE))
```

```
## Error in n(): This function should not be called directly
```

```r
delay <- filter(delay, count > 20, dist < 2000)
library(ggplot2)
ggplot(delay, aes(dist, delay)) + geom_point(aes(size = count), alpha = 1 / 2) + geom_smooth() + scale_size_area()
```

```
## `geom_smooth()` using method = 'gam'
```

```
## Warning: Removed 1 rows containing non-finite values (stat_smooth).
```

```
## Warning: Removed 1 rows containing missing values (geom_point).
```

![plot of chunk unnamed-chunk-50](figure/unnamed-chunk-50-1.png)


```r
# 문제1) Year, Month, DayofMonth를 수준별로 그룹화
hflights[c("Year", "Month", "DayofMonth")]
```

```
##         Year Month DayofMonth
## 5424    2011     1          1
## 5425    2011     1          2
## 5426    2011     1          3
## 5427    2011     1          4
## 5428    2011     1          5
## 5429    2011     1          6
## 5430    2011     1          7
## 5431    2011     1          8
## 5432    2011     1          9
## 5433    2011     1         10
## 5434    2011     1         11
## 5435    2011     1         12
## 5436    2011     1         13
## 5437    2011     1         14
## 5438    2011     1         15
## 5439    2011     1         16
## 5440    2011     1         17
## 5441    2011     1         18
## 5442    2011     1         19
## 5443    2011     1         20
## 5444    2011     1         21
## 5445    2011     1         22
## 5446    2011     1         23
## 5447    2011     1         24
## 5448    2011     1         25
## 5449    2011     1         26
## 5450    2011     1         27
## 5451    2011     1         28
## 5452    2011     1         29
## 5453    2011     1         30
## 5454    2011     1         31
## 6343    2011     1          1
## 6344    2011     1          2
## 6345    2011     1          3
## 6346    2011     1          4
## 6347    2011     1          5
## 6348    2011     1          6
## 6349    2011     1          7
## 6350    2011     1          8
## 6351    2011     1          9
## 6352    2011     1         10
## 6353    2011     1         11
## 6354    2011     1         12
## 6355    2011     1         13
## 6356    2011     1         14
## 6357    2011     1         15
## 6358    2011     1         16
## 6359    2011     1         17
## 6360    2011     1         18
## 6361    2011     1         19
## 6362    2011     1         20
## 6363    2011     1         21
## 6364    2011     1         22
## 6365    2011     1         23
## 6366    2011     1         24
## 6367    2011     1         25
## 6368    2011     1         26
## 6369    2011     1         27
## 6370    2011     1         28
## 6371    2011     1         29
## 6372    2011     1         30
## 6373    2011     1         31
## 8186    2011     1          2
## 8187    2011     1          3
## 8188    2011     1          4
## 8189    2011     1          5
## 8190    2011     1          6
## 8191    2011     1          7
## 8192    2011     1          9
## 8193    2011     1         10
## 8194    2011     1         11
## 8195    2011     1         12
## 8196    2011     1         13
## 8197    2011     1         14
## 8198    2011     1         16
## 8199    2011     1         17
## 8200    2011     1         18
## 8201    2011     1         19
## 8202    2011     1         20
## 8203    2011     1         21
## 8204    2011     1         23
## 8205    2011     1         24
## 8206    2011     1         25
## 8207    2011     1         26
## 8208    2011     1         27
## 8209    2011     1         28
## 8210    2011     1         30
## 8211    2011     1         31
## 19266   2011     1          1
## 19267   2011     1          2
## 19268   2011     1          3
## 19269   2011     1          4
## 19270   2011     1          5
## 19271   2011     1          6
## 19272   2011     1          7
## 19273   2011     1          8
## 19274   2011     1          9
## 19275   2011     1         10
## 19276   2011     1         11
## 19277   2011     1         12
## 19278   2011     1         13
## 19279   2011     1         14
## 19280   2011     1         15
## 19281   2011     1         16
## 19282   2011     1         17
## 19283   2011     1         18
## 19284   2011     1         19
## 19285   2011     1         20
## 19286   2011     1         21
## 19287   2011     1         22
## 19288   2011     1         23
## 19289   2011     1         24
## 19290   2011     1         25
## 19291   2011     1         26
## 19292   2011     1         27
## 19293   2011     1         28
## 19294   2011     1         29
## 19295   2011     1         30
## 19296   2011     1         31
## 23655   2011     1          1
## 23656   2011     1          2
## 23657   2011     1          3
## 23658   2011     1          4
## 23659   2011     1          5
## 23660   2011     1          6
## 23661   2011     1          7
## 23662   2011     1          8
## 23663   2011     1          9
## 23664   2011     1         10
## 23665   2011     1         11
## 23666   2011     1         12
## 23667   2011     1         13
## 23668   2011     1         14
## 23669   2011     1         15
## 23670   2011     1         16
## 23671   2011     1         17
## 23672   2011     1         18
## 23673   2011     1         19
## 23674   2011     1         20
## 23675   2011     1         21
## 23676   2011     1         22
## 23677   2011     1         23
## 23678   2011     1         24
## 23679   2011     1         25
## 23680   2011     1         26
## 23681   2011     1         27
## 23682   2011     1         28
## 23683   2011     1         29
## 23684   2011     1         30
## 23685   2011     1         31
## 27063   2011     1          3
## 27064   2011     1          4
## 27065   2011     1          5
## 27066   2011     1          6
## 27067   2011     1          7
## 27068   2011     1         10
## 27069   2011     1         11
## 27070   2011     1         12
## 27071   2011     1         13
## 27072   2011     1         14
## 27073   2011     1         17
## 27074   2011     1         18
## 27075   2011     1         19
## 27076   2011     1         20
## 27077   2011     1         21
## 27078   2011     1         24
## 27079   2011     1         25
## 27080   2011     1         26
## 27081   2011     1         27
## 27082   2011     1         28
## 27083   2011     1         31
## 33051   2011     1          1
## 33052   2011     1          2
## 33053   2011     1          3
## 33054   2011     1          4
## 33055   2011     1          5
## 33056   2011     1          6
## 33057   2011     1          7
## 33058   2011     1          8
## 33059   2011     1          9
## 33060   2011     1         10
## 33061   2011     1         11
## 33062   2011     1         12
## 33063   2011     1         13
## 33064   2011     1         14
## 33065   2011     1         15
## 33066   2011     1         16
## 33067   2011     1         17
## 33068   2011     1         18
## 33069   2011     1         19
## 33070   2011     1         20
## 33071   2011     1         21
## 33072   2011     1         22
## 33073   2011     1         23
## 33074   2011     1         24
## 33075   2011     1         25
## 33076   2011     1         26
## 33077   2011     1         27
## 33078   2011     1         28
## 33079   2011     1         29
## 33080   2011     1         30
## 33081   2011     1         31
## 35256   2011     1          1
## 35257   2011     1          2
## 35258   2011     1          3
## 35259   2011     1          4
## 35260   2011     1          5
## 35261   2011     1          6
## 35262   2011     1          7
## 35263   2011     1          8
## 35264   2011     1          9
## 35265   2011     1         10
## 35266   2011     1         11
## 35267   2011     1         12
## 35268   2011     1         13
## 35269   2011     1         14
## 35270   2011     1         15
## 35271   2011     1         16
## 35272   2011     1         17
## 35273   2011     1         18
## 35274   2011     1         19
## 35275   2011     1         20
## 35276   2011     1         21
## 35277   2011     1         22
## 35278   2011     1         23
## 35279   2011     1         24
## 35280   2011     1         25
## 35281   2011     1         26
## 35282   2011     1         27
## 35283   2011     1         28
## 35284   2011     1         29
## 35285   2011     1         30
## 35286   2011     1         31
## 35375   2011     1          2
## 35376   2011     1          8
## 35377   2011     1          9
## 35378   2011     1         15
## 35379   2011     1         16
## 35380   2011     1         22
## 35381   2011     1         23
## 35382   2011     1         29
## 35383   2011     1         30
## 39453   2011     1          1
## 39454   2011     1          2
## 39455   2011     1          3
## 39456   2011     1          4
## 39457   2011     1          5
## 39458   2011     1          6
## 39459   2011     1          7
## 39460   2011     1          8
## 39461   2011     1          9
## 39462   2011     1         10
## 39463   2011     1         11
## 39464   2011     1         12
## 39465   2011     1         13
## 39466   2011     1         14
## 39467   2011     1         15
## 39468   2011     1         16
## 39469   2011     1         17
## 39470   2011     1         18
## 39471   2011     1         19
## 39472   2011     1         20
## 39473   2011     1         21
## 39474   2011     1         22
## 39475   2011     1         23
## 39476   2011     1         24
## 39477   2011     1         25
## 39478   2011     1         26
## 39479   2011     1         27
## 39480   2011     1         28
## 39481   2011     1         29
## 39482   2011     1         30
## 39483   2011     1         31
## 46433   2011     1          1
## 46788   2011     1          2
## 47191   2011     1          3
## 47585   2011     1          4
## 47933   2011     1          5
## 48343   2011     1          6
## 48672   2011     1          7
## 49014   2011     1          8
## 49394   2011     1          9
## 49788   2011     1         10
## 50174   2011     1         11
## 50499   2011     1         12
## 50905   2011     1         13
## 51270   2011     1         14
## 51599   2011     1         15
## 51976   2011     1         16
## 52351   2011     1         17
## 52723   2011     1         18
## 53076   2011     1         19
## 53497   2011     1         20
## 53832   2011     1         21
## 54167   2011     1         22
## 54534   2011     1         23
## 54947   2011     1         24
## 55324   2011     1         25
## 55688   2011     1         26
## 56057   2011     1         27
## 56410   2011     1         28
## 56750   2011     1         29
## 57125   2011     1         30
## 57472   2011     1         31
## 57719   2011     1          1
## 57720   2011     1          1
## 58343   2011     1          2
## 58344   2011     1          2
## 58983   2011     1          3
## 58984   2011     1          3
## 59614   2011     1          4
## 59615   2011     1          4
## 60195   2011     1          5
## 60196   2011     1          5
## 60734   2011     1          6
## 61317   2011     1          7
## 61318   2011     1          7
## 61875   2011     1          8
## 62403   2011     1          9
## 62404   2011     1          9
## 62989   2011     1         10
## 62990   2011     1         10
## 63545   2011     1         11
## 63546   2011     1         11
## 64043   2011     1         12
## 64557   2011     1         13
## 65133   2011     1         14
## 65134   2011     1         14
## 65685   2011     1         15
## 66204   2011     1         16
## 66205   2011     1         16
## 66785   2011     1         17
## 66786   2011     1         17
##  [ reached getOption("max.print") -- omitted 227163 rows ]
```

```r
range(hflights$Year); range(hflights$Month); range(hflights$DayofMonth)
```

```
## [1] 2011 2011
```

```
## [1]  1 12
```

```
## [1]  1 31
```

```r
str(hflights)
```

```
## 'data.frame':	227496 obs. of  21 variables:
##  $ Year             : int  2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 ...
##  $ Month            : int  1 1 1 1 1 1 1 1 1 1 ...
##  $ DayofMonth       : int  1 2 3 4 5 6 7 8 9 10 ...
##  $ DayOfWeek        : int  6 7 1 2 3 4 5 6 7 1 ...
##  $ DepTime          : int  1400 1401 1352 1403 1405 1359 1359 1355 1443 1443 ...
##  $ ArrTime          : int  1500 1501 1502 1513 1507 1503 1509 1454 1554 1553 ...
##  $ UniqueCarrier    : chr  "AA" "AA" "AA" "AA" ...
##  $ FlightNum        : int  428 428 428 428 428 428 428 428 428 428 ...
##  $ TailNum          : chr  "N576AA" "N557AA" "N541AA" "N403AA" ...
##  $ ActualElapsedTime: int  60 60 70 70 62 64 70 59 71 70 ...
##  $ AirTime          : int  40 45 48 39 44 45 43 40 41 45 ...
##  $ ArrDelay         : int  -10 -9 -8 3 -3 -7 -1 -16 44 43 ...
##  $ DepDelay         : int  0 1 -8 3 5 -1 -1 -5 43 43 ...
##  $ Origin           : chr  "IAH" "IAH" "IAH" "IAH" ...
##  $ Dest             : chr  "DFW" "DFW" "DFW" "DFW" ...
##  $ Distance         : int  224 224 224 224 224 224 224 224 224 224 ...
##  $ TaxiIn           : int  7 6 5 9 9 6 12 7 8 6 ...
##  $ TaxiOut          : int  13 9 17 22 9 13 15 12 22 19 ...
##  $ Cancelled        : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ CancellationCode : chr  "" "" "" "" ...
##  $ Diverted         : int  0 0 0 0 0 0 0 0 0 0 ...
```

```r
group_by(hflights, Year, Month, DayofMonth)
```

```
## Source: local data frame [227,496 x 21]
## Groups: Year, Month, DayofMonth [365]
## 
##     Year Month DayofMonth DayOfWeek DepTime ArrTime UniqueCarrier FlightNum TailNum
## *  <int> <int>      <int>     <int>   <int>   <int>         <chr>     <int>   <chr>
## 1   2011     1          1         6    1400    1500            AA       428  N576AA
## 2   2011     1          2         7    1401    1501            AA       428  N557AA
## 3   2011     1          3         1    1352    1502            AA       428  N541AA
## 4   2011     1          4         2    1403    1513            AA       428  N403AA
## 5   2011     1          5         3    1405    1507            AA       428  N492AA
## 6   2011     1          6         4    1359    1503            AA       428  N262AA
## 7   2011     1          7         5    1359    1509            AA       428  N493AA
## 8   2011     1          8         6    1355    1454            AA       428  N477AA
## 9   2011     1          9         7    1443    1554            AA       428  N476AA
## 10  2011     1         10         1    1443    1553            AA       428  N504AA
## # ... with 227,486 more rows, and 12 more variables: ActualElapsedTime <int>, AirTime <int>,
## #   ArrDelay <int>, DepDelay <int>, Origin <chr>, Dest <chr>, Distance <int>, TaxiIn <int>,
## #   TaxiOut <int>, Cancelled <int>, CancellationCode <chr>, Diverted <int>
```

```r
arranged <- arrange(hflights, Year, Month, DayofMonth)

# 문제2) Year부터 DayofMonth, ArrDelay, DepDelay 열을 선택
selected <- select(arranged, Year, DayofMonth, ArrDelay, DepDelay)

# 문제3) 평균 연착시간과 평균 출발 지연시간계산
avg_arrdelay = mean(hflights$ArrDelay, na.rm = TRUE);
avg_depdelay = mean(hflights$DepDelay, na.rm = TRUE)
avg <- summarise(selected, avg_arrdelay, avg_depdelay)

# 문제4) 평균 연착시간과 평균 출발지연시간의 차이가 30분 이상인 데이터 추출
diff_added <- mutate(selected, diff = abs(hflights$ArrDelay - hflights$DepDelay))
  # q4. dplyr way
final <- filter(diff_added, diff >= 30)
final
```

```
##      Year DayofMonth ArrDelay DepDelay diff
## 1    2011          1       -2        4   32
## 2    2011          1      -18        1   54
## 3    2011          1        2        8   31
## 4    2011          1       21       28   46
## 5    2011          1       14       -1   34
## 6    2011          1        5       -1   38
## 7    2011          1      -19       -8   30
## 8    2011          2       18        9   30
## 9    2011          2       71       80   36
## 10   2011          2       29       16   42
## 11   2011          2       85       96   32
## 12   2011          2       -8       -6   30
## 13   2011          2        1       14   31
## 14   2011          2      -10        1   36
## 15   2011          2       14        2   40
## 16   2011          2       -5        3   33
## 17   2011          2       -8        0   33
## 18   2011          2       40       48   31
## 19   2011          2       39       39   31
## 20   2011          2       -4       -6   73
## 21   2011          2       18       -1   33
## 22   2011          2       -4       -4   31
## 23   2011          2      -14       -3   41
## 24   2011          2        2       21   37
## 25   2011          2        2       -3   34
## 26   2011          2       -7       -2   54
## 27   2011          2      -18       -2   33
## 28   2011          2        4        0   34
## 29   2011          3      -17       -2   43
## 30   2011          3       -1        1   30
## 31   2011          3        2       19   30
## 32   2011          3      -15       -2  130
## 33   2011          3       -5        1   30
## 34   2011          3      -10        3   34
## 35   2011          3       13       14   39
## 36   2011          3       31       37   36
## 37   2011          3       39       50   30
## 38   2011          3       11        0   30
## 39   2011          3       -2       -2   48
## 40   2011          4        8       38   32
## 41   2011          4       14        4   34
## 42   2011          4       86       65   30
## 43   2011          4       51       61   40
## 44   2011          4        7        6   37
## 45   2011          4       18       20   33
## 46   2011          4        3        4   54
## 47   2011          4       -2        0   32
## 48   2011          4       16       -3   30
## 49   2011          4       -6       -1   34
## 50   2011          4       -1        3   36
## 51   2011          4      -11       -2   32
## 52   2011          5        1        0   31
## 53   2011          5       -7        0   30
## 54   2011          5      -24       -2   32
## 55   2011          5        1       12   46
## 56   2011          5        2       18   47
## 57   2011          5      -13       -4   32
## 58   2011          5        5       -1   31
## 59   2011          5       -4        5   41
## 60   2011          5       21       11   31
## 61   2011          5        7       12   44
## 62   2011          5      -20       -5   43
## 63   2011          5       26       28   46
## 64   2011          5      -16       -4   31
## 65   2011          5       -8       -1   53
## 66   2011          5       17       24   45
## 67   2011          5       18       20   31
## 68   2011          5        1       -5   35
## 69   2011          5       -8        2   33
## 70   2011          5       -2        0   32
## 71   2011          5      -13        0   31
## 72   2011          5        5        5   33
## 73   2011          5       -6       -3   68
## 74   2011          5       -4       -3   49
## 75   2011          6       18       36   35
## 76   2011          6       79      100   32
## 77   2011          6        3        0   51
## 78   2011          6       31       19   32
## 79   2011          6      -14        0   30
## 80   2011          6       62       42   32
## 81   2011          6       13       12   31
## 82   2011          6       -1        2   31
## 83   2011          6        2        3   37
## 84   2011          6       27       25   35
## 85   2011          6       17        5   32
## 86   2011          6        6        1   36
## 87   2011          6        6        4   31
## 88   2011          6       -1       -3   35
## 89   2011          6        6       -2   33
## 90   2011          6       -8       -3   32
## 91   2011          6        0       -2   31
## 92   2011          7       -7        2   32
## 93   2011          7       19       25   31
## 94   2011          7       -4        4   36
## 95   2011          7        5       11   31
## 96   2011          7      -15       -9   34
## 97   2011          7       -4       -4   33
## 98   2011          7       13       16   31
## 99   2011          7      -10       -4   33
## 100  2011          7       20        2   34
## 101  2011          7       -2       -6   40
## 102  2011          7       16        0   54
## 103  2011          7      -13       -1   39
## 104  2011          7       -9       -7   30
## 105  2011          8       -4        4   30
## 106  2011          8       86       64   30
## 107  2011          8       30       27   46
## 108  2011          8       13       12   35
## 109  2011          8       44       39   32
## 110  2011          9       19       25   59
## 111  2011          9        0       14   34
## 112  2011         10        1       19   30
## 113  2011         10        4        0   30
## 114  2011         10       14       21   31
## 115  2011         10       -3        1   30
## 116  2011         10        3       -1   34
## 117  2011         10       -9       -3   31
## 118  2011         10      -11       -2   38
## 119  2011         10      -10       -5   30
## 120  2011         10       51       57   44
## 121  2011         10       -7       -2   42
## 122  2011         10        0       -1   34
## 123  2011         11       15        0   31
## 124  2011         11       -1        5   31
## 125  2011         11       -1       -1   30
## 126  2011         11       -5       -3   39
## 127  2011         11       16       23   30
## 128  2011         11       50       52   30
## 129  2011         11       -6       -1   30
## 130  2011         11       32       42   31
## 131  2011         11      -13       -1   32
## 132  2011         11       11        0   35
## 133  2011         11       16       13   35
## 134  2011         12       -9       -4   30
## 135  2011         12        2        9   31
## 136  2011         12      -12       -4   34
## 137  2011         12       -3        3   36
## 138  2011         12       54       65   37
## 139  2011         12        9       16   36
## 140  2011         12       -3       -1   33
## 141  2011         12      -10       -2   37
## 142  2011         13       -3        7  144
## 143  2011         13       -2       -1   34
## 144  2011         13       -1        5   41
## 145  2011         14        1       -4   40
## 146  2011         14        5       16   33
## 147  2011         14        6        0   32
## 148  2011         14        2        9   46
## 149  2011         14       29       33   32
## 150  2011         14        2        1   31
## 151  2011         15       17        7   34
## 152  2011         15      -13        3  100
## 153  2011         15       -2       -2   52
## 154  2011         15        8        6   42
## 155  2011         15       14       28   94
## 156  2011         15       63       55   46
## 157  2011         15        1      -12   31
## 158  2011         15      -10       -2   41
## 159  2011         16        2       -8   41
## 160  2011         16       38       37   62
## 161  2011         16      -13       -3   41
## 162  2011         16       30       42   30
## 163  2011         17      -13       -3   36
## 164  2011         17      -12        2   33
## 165  2011         17      -13       -2   31
## 166  2011         17      -19        2   33
## 167  2011         17        6       -1   33
## 168  2011         17       46       47   30
## 169  2011         17       30       38   37
## 170  2011         17        0       -1   36
## 171  2011         17       23       16   40
## 172  2011         17       -7       -8   32
## 173  2011         17        0       -2   31
## 174  2011         17       -5       -2   34
## 175  2011         17       -4       -2   35
## 176  2011         17        1       -2   30
## 177  2011         18       29       29   30
## 178  2011         18        1        0   30
## 179  2011         18       15        6   31
## 180  2011         18      -22       -9   34
## 181  2011         18      -12       -2   34
## 182  2011         18      -17       -1   30
## 183  2011         19        2       -7   30
## 184  2011         19      -11       -7   30
## 185  2011         19        0        2   31
## 186  2011         19        0       -3   30
## 187  2011         19       21       15   31
## 188  2011         20        7        5   34
## 189  2011         20        4        1   37
## 190  2011         20      -11       -1   33
## 191  2011         20        3        6   32
## 192  2011         21        2       -2   30
## 193  2011         21      -11       -2   39
## 194  2011         21      -11       -3   38
## 195  2011         21       -2        9   36
## 196  2011         21       -3        0   30
## 197  2011         21       -4       -7   30
## 198  2011         21      -20       -6   50
## 199  2011         21       -9       -6   30
## 200  2011         21        0       10   30
##  [ reached getOption("max.print") -- omitted 4082 rows ]
```

```r
  # q4. traditional way
diff30 <- subset(diff_added, subset = (abs(diff_added$diff) >= 30))
diff30
```

```
##        Year DayofMonth ArrDelay DepDelay diff
## 259    2011          1       -2        4   32
## 283    2011          1      -18        1   54
## 289    2011          1        2        8   31
## 290    2011          1       21       28   46
## 344    2011          1       14       -1   34
## 449    2011          1        5       -1   38
## 490    2011          1      -19       -8   30
## 635    2011          2       18        9   30
## 638    2011          2       71       80   36
## 696    2011          2       29       16   42
## 747    2011          2       85       96   32
## 1038   2011          2       -8       -6   30
## 1045   2011          2        1       14   31
## 1052   2011          2      -10        1   36
## 1055   2011          2       14        2   40
## 1067   2011          2       -5        3   33
## 1114   2011          2       -8        0   33
## 1120   2011          2       40       48   31
## 1142   2011          2       39       39   31
## 1153   2011          2       -4       -6   73
## 1159   2011          2       18       -1   33
## 1164   2011          2       -4       -4   31
## 1189   2011          2      -14       -3   41
## 1195   2011          2        2       21   37
## 1199   2011          2        2       -3   34
## 1213   2011          2       -7       -2   54
## 1222   2011          2      -18       -2   33
## 1225   2011          2        4        0   34
## 1237   2011          3      -17       -2   43
## 1245   2011          3       -1        1   30
## 1255   2011          3        2       19   30
## 1262   2011          3      -15       -2  130
## 1269   2011          3       -5        1   30
## 1348   2011          3      -10        3   34
## 1422   2011          3       13       14   39
## 1450   2011          3       31       37   36
## 1614   2011          3       39       50   30
## 1632   2011          3       11        0   30
## 1701   2011          3       -2       -2   48
## 1953   2011          4        8       38   32
## 2031   2011          4       14        4   34
## 2275   2011          4       86       65   30
## 2300   2011          4       51       61   40
## 2383   2011          4        7        6   37
## 2389   2011          4       18       20   33
## 2428   2011          4        3        4   54
## 2455   2011          4       -2        0   32
## 2466   2011          4       16       -3   30
## 2478   2011          4       -6       -1   34
## 2498   2011          4       -1        3   36
## 2510   2011          4      -11       -2   32
## 2523   2011          5        1        0   31
## 2540   2011          5       -7        0   30
## 2554   2011          5      -24       -2   32
## 2561   2011          5        1       12   46
## 2590   2011          5        2       18   47
## 2602   2011          5      -13       -4   32
## 2608   2011          5        5       -1   31
## 2612   2011          5       -4        5   41
## 2648   2011          5       21       11   31
## 2650   2011          5        7       12   44
## 2651   2011          5      -20       -5   43
## 2660   2011          5       26       28   46
## 2668   2011          5      -16       -4   31
## 2690   2011          5       -8       -1   53
## 2831   2011          5       17       24   45
## 2898   2011          5       18       20   31
## 2963   2011          5        1       -5   35
## 2967   2011          5       -8        2   33
## 2980   2011          5       -2        0   32
## 2983   2011          5      -13        0   31
## 2989   2011          5        5        5   33
## 3014   2011          5       -6       -3   68
## 3048   2011          5       -4       -3   49
## 3126   2011          6       18       36   35
## 3158   2011          6       79      100   32
## 3248   2011          6        3        0   51
## 3251   2011          6       31       19   32
## 3278   2011          6      -14        0   30
## 3284   2011          6       62       42   32
## 3382   2011          6       13       12   31
## 3401   2011          6       -1        2   31
## 3408   2011          6        2        3   37
## 3425   2011          6       27       25   35
## 3435   2011          6       17        5   32
## 3645   2011          6        6        1   36
## 3653   2011          6        6        4   31
## 3684   2011          6       -1       -3   35
## 3690   2011          6        6       -2   33
## 3738   2011          6       -8       -3   32
## 3752   2011          6        0       -2   31
## 3770   2011          7       -7        2   32
## 3791   2011          7       19       25   31
## 3839   2011          7       -4        4   36
## 3879   2011          7        5       11   31
## 3954   2011          7      -15       -9   34
## 3960   2011          7       -4       -4   33
## 3963   2011          7       13       16   31
## 4042   2011          7      -10       -4   33
## 4239   2011          7       20        2   34
## 4272   2011          7       -2       -6   40
## 4291   2011          7       16        0   54
## 4319   2011          7      -13       -1   39
## 4322   2011          7       -9       -7   30
## 4519   2011          8       -4        4   30
## 4563   2011          8       86       64   30
## 4669   2011          8       30       27   46
## 4682   2011          8       13       12   35
## 4690   2011          8       44       39   32
## 4998   2011          9       19       25   59
## 5019   2011          9        0       14   34
## 5540   2011         10        1       19   30
## 5617   2011         10        4        0   30
## 5898   2011         10       14       21   31
## 5935   2011         10       -3        1   30
## 5957   2011         10        3       -1   34
## 5996   2011         10       -9       -3   31
## 6059   2011         10      -11       -2   38
## 6085   2011         10      -10       -5   30
## 6101   2011         10       51       57   44
## 6123   2011         10       -7       -2   42
## 6142   2011         10        0       -1   34
## 6308   2011         11       15        0   31
## 6540   2011         11       -1        5   31
## 6544   2011         11       -1       -1   30
## 6568   2011         11       -5       -3   39
## 6570   2011         11       16       23   30
## 6571   2011         11       50       52   30
## 6576   2011         11       -6       -1   30
## 6686   2011         11       32       42   31
## 6702   2011         11      -13       -1   32
## 6727   2011         11       11        0   35
## 6737   2011         11       16       13   35
## 6814   2011         12       -9       -4   30
## 6900   2011         12        2        9   31
## 6941   2011         12      -12       -4   34
## 7043   2011         12       -3        3   36
## 7045   2011         12       54       65   37
## 7065   2011         12        9       16   36
## 7146   2011         12       -3       -1   33
## 7289   2011         12      -10       -2   37
## 7437   2011         13       -3        7  144
## 7460   2011         13       -2       -1   34
## 7674   2011         13       -1        5   41
## 8147   2011         14        1       -4   40
## 8235   2011         14        5       16   33
## 8391   2011         14        6        0   32
## 8400   2011         14        2        9   46
## 8459   2011         14       29       33   32
## 8534   2011         14        2        1   31
## 8704   2011         15       17        7   34
## 8812   2011         15      -13        3  100
## 8814   2011         15       -2       -2   52
## 8828   2011         15        8        6   42
## 8874   2011         15       14       28   94
## 8880   2011         15       63       55   46
## 8887   2011         15        1      -12   31
## 8893   2011         15      -10       -2   41
## 9412   2011         16        2       -8   41
## 9446   2011         16       38       37   62
## 9480   2011         16      -13       -3   41
## 9568   2011         16       30       42   30
## 9939   2011         17      -13       -3   36
## 9944   2011         17      -12        2   33
## 9979   2011         17      -13       -2   31
## 9980   2011         17      -19        2   33
## 10075  2011         17        6       -1   33
## 10076  2011         17       46       47   30
## 10111  2011         17       30       38   37
## 10275  2011         17        0       -1   36
## 10277  2011         17       23       16   40
## 10278  2011         17       -7       -8   32
## 10297  2011         17        0       -2   31
## 10304  2011         17       -5       -2   34
## 10306  2011         17       -4       -2   35
## 10307  2011         17        1       -2   30
## 10787  2011         18       29       29   30
## 10818  2011         18        1        0   30
## 10823  2011         18       15        6   31
## 10898  2011         18      -22       -9   34
## 10916  2011         18      -12       -2   34
## 10917  2011         18      -17       -1   30
## 11117  2011         19        2       -7   30
## 11237  2011         19      -11       -7   30
## 11239  2011         19        0        2   31
## 11252  2011         19        0       -3   30
## 11367  2011         19       21       15   31
## 11660  2011         20        7        5   34
## 11757  2011         20        4        1   37
## 11759  2011         20      -11       -1   33
## 11793  2011         20        3        6   32
## 12378  2011         21        2       -2   30
## 12385  2011         21      -11       -2   39
## 12389  2011         21      -11       -3   38
## 12426  2011         21       -2        9   36
## 12483  2011         21       -3        0   30
## 12485  2011         21       -4       -7   30
## 12506  2011         21      -20       -6   50
## 12515  2011         21       -9       -6   30
## 12521  2011         21        0       10   30
##  [ reached getOption("max.print") -- omitted 4082 rows ]
```

```r
library(reshape2)

subject <- c("John", "Mary", "Tea")
time <- c(1, 1, 1)
age <- c(33, 3, NA)
weight <- c(90, NA, 20)
height <- c(2, 3, NA)

smiths <- data.frame(subject = subject, time = time, age = age, weight = weight, height = height)

melt(smiths)
```

```
## Using subject as id variables
```

```
##    subject variable value
## 1     John     time     1
## 2     Mary     time     1
## 3      Tea     time     1
## 4     John      age    33
## 5     Mary      age     3
## 6      Tea      age    NA
## 7     John   weight    90
## 8     Mary   weight    NA
## 9      Tea   weight    20
## 10    John   height     2
## 11    Mary   height     3
## 12     Tea   height    NA
```

```r
melt(smiths, id = c("subject", "time"))
```

```
##   subject time variable value
## 1    John    1      age    33
## 2    Mary    1      age     3
## 3     Tea    1      age    NA
## 4    John    1   weight    90
## 5    Mary    1   weight    NA
## 6     Tea    1   weight    20
## 7    John    1   height     2
## 8    Mary    1   height     3
## 9     Tea    1   height    NA
```

```r
melt(smiths, id = 1:2)
```

```
##   subject time variable value
## 1    John    1      age    33
## 2    Mary    1      age     3
## 3     Tea    1      age    NA
## 4    John    1   weight    90
## 5    Mary    1   weight    NA
## 6     Tea    1   weight    20
## 7    John    1   height     2
## 8    Mary    1   height     3
## 9     Tea    1   height    NA
```

```r
melt(smiths, id = c("subject", "time"), measured = c("age", "weight", "height"))
```

```
##   subject time variable value
## 1    John    1      age    33
## 2    Mary    1      age     3
## 3     Tea    1      age    NA
## 4    John    1   weight    90
## 5    Mary    1   weight    NA
## 6     Tea    1   weight    20
## 7    John    1   height     2
## 8    Mary    1   height     3
## 9     Tea    1   height    NA
```

```r
melt(smiths, measured = c("age", "weight", "height"))
```

```
## Using subject as id variables
```

```
##    subject variable value
## 1     John     time     1
## 2     Mary     time     1
## 3      Tea     time     1
## 4     John      age    33
## 5     Mary      age     3
## 6      Tea      age    NA
## 7     John   weight    90
## 8     Mary   weight    NA
## 9      Tea   weight    20
## 10    John   height     2
## 11    Mary   height     3
## 12     Tea   height    NA
```

```r
trial <- data.frame(id = factor(1:4), A1 = c(1, 2, 1, 2), A2 = c(2, 1, 2, 1), B1 = c(3, 3, 3, 3))
(trialm <- melt(trial))
```

```
## Using id as id variables
```

```
##    id variable value
## 1   1       A1     1
## 2   2       A1     2
## 3   3       A1     1
## 4   4       A1     2
## 5   1       A2     2
## 6   2       A2     1
## 7   3       A2     2
## 8   4       A2     1
## 9   1       B1     3
## 10  2       B1     3
## 11  3       B1     3
## 12  4       B1     3
```

```r
(trialm <- cbind(trialm, colsplit(trialm$variable, pattern = "[,]", names = c("treatment", "time"))))
```

```
##    id variable value treatment time
## 1   1       A1     1        A1   NA
## 2   2       A1     2        A1   NA
## 3   3       A1     1        A1   NA
## 4   4       A1     2        A1   NA
## 5   1       A2     2        A2   NA
## 6   2       A2     1        A2   NA
## 7   3       A2     2        A2   NA
## 8   4       A2     1        A2   NA
## 9   1       B1     3        B1   NA
## 10  2       B1     3        B1   NA
## 11  3       B1     3        B1   NA
## 12  4       B1     3        B1   NA
```

```r
smithsm = melt(smiths, id = c("subject"), na.rm = TRUE)

dcast(smithsm, time + subject ~ variable)
```

```
##   time subject time age weight height
## 1    1    John    1  33     90      2
## 2    1    Mary    1   3     NA      3
## 3    1     Tea    1  NA     20     NA
```

```r
dcast(smithsm, ... ~ variable)
```

```
##   subject time age weight height
## 1    John    1  33     90      2
## 2    Mary    1   3     NA      3
## 3     Tea    1  NA     20     NA
```

```r
dcast(smithsm, ... ~ subject)
```

```
##   variable John Mary Tea
## 1     time    1    1   1
## 2      age   33    3  NA
## 3   weight   90   NA  20
## 4   height    2    3  NA
```

```r
dcast(smithsm, ... ~ time)
```

```
##   subject variable  1
## 1    John     time  1
## 2    John      age 33
## 3    John   weight 90
## 4    John   height  2
## 5    Mary     time  1
## 6    Mary      age  3
## 7    Mary   height  3
## 8     Tea     time  1
## 9     Tea   weight 20
```


```r
install.packages("languageR", repos="http://cran.nexr.com/")
```

```
## Installing package into '/home/jw/R/x86_64-pc-linux-gnu-library/3.3'
## (as 'lib' is unspecified)
```

```r
data(lexdec, package = 'languageR')
str(lexdec)
```

```
## 'data.frame':	1659 obs. of  28 variables:
##  $ Subject       : Factor w/ 21 levels "A1","A2","A3",..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ RT            : num  6.34 6.31 6.35 6.19 6.03 ...
##  $ Trial         : int  23 27 29 30 32 33 34 38 41 42 ...
##  $ Sex           : Factor w/ 2 levels "F","M": 1 1 1 1 1 1 1 1 1 1 ...
##  $ NativeLanguage: Factor w/ 2 levels "English","Other": 1 1 1 1 1 1 1 1 1 1 ...
##  $ Correct       : Factor w/ 2 levels "correct","incorrect": 1 1 1 1 1 1 1 1 1 1 ...
##  $ PrevType      : Factor w/ 2 levels "nonword","word": 2 1 1 2 1 2 2 1 1 2 ...
##  $ PrevCorrect   : Factor w/ 2 levels "correct","incorrect": 1 1 1 1 1 1 1 1 1 1 ...
##  $ Word          : Factor w/ 79 levels "almond","ant",..: 55 47 20 58 25 12 71 69 62 1 ...
##  $ Frequency     : num  4.86 4.61 5 4.73 7.67 ...
##  $ FamilySize    : num  1.386 1.099 0.693 0 3.135 ...
##  $ SynsetCount   : num  0.693 1.946 1.609 1.099 2.079 ...
##  $ Length        : int  3 4 6 4 3 10 10 8 6 6 ...
##  $ Class         : Factor w/ 2 levels "animal","plant": 1 1 2 2 1 2 2 1 2 2 ...
##  $ FreqSingular  : int  54 69 83 44 1233 26 50 63 11 24 ...
##  $ FreqPlural    : int  74 30 49 68 828 31 65 47 9 42 ...
##  $ DerivEntropy  : num  0.791 0.697 0.475 0 1.213 ...
##  $ Complex       : Factor w/ 2 levels "complex","simplex": 2 2 2 2 2 1 1 2 2 2 ...
##  $ rInfl         : num  -0.31 0.815 0.519 -0.427 0.398 ...
##  $ meanRT        : num  6.36 6.42 6.34 6.34 6.3 ...
##  $ SubjFreq      : num  3.12 2.4 3.88 4.52 6.04 3.28 5.04 2.8 3.12 3.72 ...
##  $ meanSize      : num  3.48 3 1.63 1.99 4.64 ...
##  $ meanWeight    : num  3.18 2.61 1.21 1.61 4.52 ...
##  $ BNCw          : num  12.06 5.74 5.72 2.05 74.84 ...
##  $ BNCc          : num  0 4.06 3.25 1.46 50.86 ...
##  $ BNCd          : num  6.18 2.85 12.59 7.36 241.56 ...
##  $ BNCcRatio     : num  0 0.708 0.568 0.713 0.68 ...
##  $ BNCdRatio     : num  0.512 0.497 2.202 3.591 3.228 ...
```

```r
install.packages("plyr", repos="http://cran.nexr.com/")
```

```
## Error in install.packages : Updating loaded packages
```

```r
library(plyr)

RT.bysub <- with(lexdec, split(RT, Subject))
RT.means.bysub <- sapply(RT.bysub, mean)
head(data.frame(RT.mean = RT.means.bysub))
```

```
##     RT.mean
## A1 6.277734
## A2 6.220381
## A3 6.397734
## C  6.322315
## D  6.406071
## I  6.253121
```

```r
head(ddply(lexdec, .(Subject), function(df) data.frame(RT.means = mean(df$RT))))
```

```
##   Subject RT.means
## 1      A1 6.277734
## 2      A2 6.220381
## 3      A3 6.397734
## 4       C 6.322315
## 5       D 6.406071
## 6       I 6.253121
```

```r
ddply(lexdec, .(PrevType, Class), function(df) with(df, data.frame(meanRT = mean(RT))))
```

```
##   PrevType  Class   meanRT
## 1  nonword animal 6.428920
## 2  nonword  plant 6.400061
## 3     word animal 6.343233
## 4     word  plant 6.362678
```

